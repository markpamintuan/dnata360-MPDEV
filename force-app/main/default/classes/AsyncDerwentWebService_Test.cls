/* v2.0       Keith        5-Nov-2019    Change Account Record Type Names For EKH */
@isTest 
private class AsyncDerwentWebService_Test {
    static testMethod void AsyncDerwentWebService_Test() {
        try{
            List<Person_Account_Record_Types__c> recTypeList = new List<Person_Account_Record_Types__c>();
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Customer';
            reqLog.Entity_Id__c = '2131313131';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Person_Account_Record_Types__c personRec = new Person_Account_Record_Types__c();
            personRec.name='dnata';personRec.Record_Type_Name__c ='dTME_B2C Customer - New';
            recTypeList.add(personRec);
            Person_Account_Record_Types__c personRec1 = new Person_Account_Record_Types__c();
            personRec1.name='ekh';personRec1.Record_Type_Name__c ='EKH B2C Customer - New'; //v2.0
            recTypeList.add(personRec1);
            insert recTypeList;
            
            
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='2131313131',Website='www.test.test',PersonEmail='test@test.com',Customer_Domain__c='UAE',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc; 
            
            Account acc1 = new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='2131313131',Website='www.test.test',PersonEmail='test@test.com',Customer_Domain__c='UAE',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            insert acc1; 
            
            // Customer Request
            AsyncDerwentWebService asyncWS = new AsyncDerwentWebService(new List<id>{reqLog.id},'Customer_Upsert',null);
            System.enqueueJob(asyncWS);
            String customerRequest='{\r\n\"Customers\": [\r\n{\r\n\"CustomerId\": \"bfb73454-5a3a-457e-b8e1-a942ae47fbf8\",\r\n\"TenantId\": 2,\r\n\"Email\": \"test@test.com\",\r\n\"Title\": \"Mr\",\r\n\"FirstName\": \"test\",\r\n\"LastName\": \"test\",\r\n\"CountryCode\": \"GB\",\r\n\"PostCode\": \"test\",\r\n\"Address\": \"test\",\r\n\"City\": \"test\",\r\n\"County\": \"\",\r\n\"HomeTel\": \"65765765\",\r\n\"MobileTel\": \"\",\r\n\"Notes\": \"\",\r\n\"LoyaltyId\": \"\",\r\n\"Nationality\": \"GB\",\r\n\"SendTextAlerts\": true,\r\n\"EmailSignup\": true\r\n}\r\n],\r\n\"CommunicationPreferenceDetails\": [\r\n{\r\n\"CommunicationChannel\": \"Email\",\r\n\"Source\": \"TravelRepublic\",\r\n\"Reason\": \"Booking Form\",\r\n\"EventDate\": \"2018-07-31T09:16:43.03\"\r\n},\r\n{\r\n\"CommunicationChannel\": \"Sms\",\r\n\"Source\": \"TravelRepublic\",\r\n\"Reason\": \"Booking Form\",\r\n\"EventDate\": \"2018-07-31T09:16:43.033\"\r\n}\r\n]\r\n,\r\n\"NotFoundCustomers\": [\r\n\"04372647-04b1-0000-a380-ac4c8d3a74d2\"\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetCustResponse(customerRequest,new List<id>{reqLog.id});
            
            AsyncDerwentWebService.prepareCustCreate(new List<id>{acc.id});
            /* Test.setMock(HttpCalloutMock.class, new AsyncDerwentWebService());  
String strResp = AsyncDerwentWebService.getAnimalNameById(2);*/
            Request_Log__c reqLogBook = new Request_Log__c();
            reqLogBook.Entity__c = 'Booking';
            reqLogBook.Entity_Id__c = '2131313';
            reqLogBook.Status__c = 'New';
            insert reqLogBook;
            AsyncDerwentWebService.getBooking(new List<id>{reqLog.id});
            string bookingRequest = '{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"99988123\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"Stays\": [\r\n{\r\n\"CheckIn\": \"2018-05-17T15:47:46.729Z\",\r\n\"CheckOut\": \"2018-05-17T15:47:46.729Z\",\r\n\"EstabId\": 0,\r\n\"EstabName\": \"string\",\r\n\"StarRating\": 0,\r\n\"DestinationName\": \"string\",\r\n\"Description\": \"string\",\r\n\"Rooms\": [\r\n{\r\n\"ItineraryId\": 0,\r\n\"RoomType\": \"string\",\r\n\"BoardType\": \"string\",\r\n\"AdditionalBoardDesc\": \"string\",\r\n\"Adults\": 0,\r\n\"Children\": 0,\r\n\"Infants\": 0\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\": 8\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 6,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"\"\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            AsyncDerwentWebService.parseGetBookingResponse(bookingRequest,new List<id>{reqLogBook.id});
            
            AsyncDerwentWebService.getExistingCustomerEmail(acc1.Id, '1234565432');
            
        } catch(Exception ex){
        }
    }
    
    static testMethod void AsyncDerwentWebServiceCustCreate_Test() {
        try{
            List<Person_Account_Record_Types__c> recTypeList = new List<Person_Account_Record_Types__c>();
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Customer';
            reqLog.Entity_Id__c = '2131313131';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Person_Account_Record_Types__c personRec = new Person_Account_Record_Types__c();
            personRec.name='dnata';personRec.Record_Type_Name__c ='dTME_B2C Customer - New';
            recTypeList.add(personRec);
            Person_Account_Record_Types__c personRec1 = new Person_Account_Record_Types__c();
            personRec1.name='ekh';personRec1.Record_Type_Name__c ='EKH B2C Customer - New'; //v2.0
            recTypeList.add(personRec1);
            insert recTypeList;
            
            
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='2131313131',Website='www.test.test',PersonEmail='test@test.com',Customer_Domain__c='UAE',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc; 
            
            // Customer Request
            AsyncDerwentWebService.sendCustCreate(new List<id>{acc.id},'Not New');
            AsyncDerwentWebService.prepareCustCreate(new List<id>{acc.id});
        } catch(Exception ex){
        }
    }
    
    static testMethod void AsyncDerwentWebServiceQuote_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Quote';
            reqLog.Entity_Id__c = '213131313123';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            /*   Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988999',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
insert acc;      */   
            
            Case objCase= new Case(recordtypeId=Schema.SObjectType.Case.getRecordTypeInfosByName().get('dTME - New Enquiry').getRecordTypeId(),
                                   Subject = 'Test', Org_Destination__c = 'Test',
                                   Org_Traveller__c = 'Couple', Org_No_of_Adults_Travelling__c = 1,
                                   Org_No_of_Children_Travelling__c = 1);
            
            insert objCase;  
            AsyncDerwentWebService.getQuote(new List<id>{reqLog.id});
            String QuoteRequest='{\r\n\"Quotes\": [\r\n{\r\n\"Id\": \"bfb73454-5a3a-457e-b8e1-a942ae47fbf8\",\r\n\"Reference\": \"string\",\r\n\"BasketId\": \"string\",\r\n\"AccountingCurrency\": \"string\",\r\n\"Currency\": \"string\",\r\n\"ForHoliday\": true,\r\n\"Products\": [\r\n{\r\n\"Id\": \"string\",\r\n\"AvailabilityId\": \"string\",\r\n\"Type\": \"string\",\r\n\"TypeId\": 0,\r\n\"Establishment\": \"string\",\r\n\"EstablishmentId\": 0,\r\n\"CheckInDate\": \"2018-05-22T14:49:52.395Z\",\r\n\"CheckOutDate\": \"2018-05-22T14:49:52.395Z\",\r\n\"Rooms\": [\r\n\"string\"\r\n],\r\n\"SpecialOffers\": [\r\n\"string\"\r\n],\r\n\"QuotedCost\": 0,\r\n\"CurrentCost\": 0,\r\n\"Options\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Title\": \"string\",\r\n\"Quantity\": 0,\r\n\"QuotedUnitCost\": 0,\r\n\"CurrentUnitCost\": 0,\r\n\"OnRequest\": true,\r\n\"RestoreFailed\": true,\r\n\"Currency\": \"string\"\r\n}\r\n],\r\n\"Alternatives\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Room\": \"string\",\r\n\"Board\": \"string\",\r\n\"Cost\": 0\r\n}\r\n],\r\n\"StalePrice\": true,\r\n\"RestoreFailed\": true,\r\n\"IsHidden\": true,\r\n\"IsPriceHidden\": true,\r\n\"IsOnRequest\": true,\r\n\"PackageId\": \"string\",\r\n\"Destination\": {\r\n\"TypeId\": 0,\r\n\"Type\": \"string\",\r\n\"Id\": 0,\r\n\"Country\": \"string\",\r\n\"Province\": \"string\",\r\n\"Location\": \"string\"\r\n}\r\n}\r\n],\r\n\"StalePrices\": true,\r\n\"SharedUse\": true,\r\n\"BookingIds\": [\r\n0\r\n],\r\n\"ImpersonatedAgent\": {\r\n\"Reference\": \"string\",\r\n\"Customer\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"ImpersonatedCustomer\": {\r\n\"Id\": \"string\",\r\n\"EmailAddress\": \"string\",\r\n\"PhoneNumber\": \"string\",\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Created\": \"2018-05-22T14:38:23.348Z\",\r\n\"CreatedByAgent\": {\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Title\": \"string\",\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"Deposit\": 0,\r\n\"DueDate\": \"2018-05-22T14:38:23.348Z\",\r\n\"Notes\": [\r\n{\r\n\"Id\": \"teetet\",\r\n\"Text\": \"string\",\r\n\"Created\": \"2018-05-22T14:38:23.348Z\",\r\n\"CreatedById\": 0,\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"DomainId\": 2,\r\n\"TrackingTag\":'+objcase.id+'\"string\"\r\n}\r\n],\r\n\"NotFoundQuotes\": [\r\n\"04372647-04b1-0000-a380-ac4c8d3a74d2\"\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetQuoteResponse(QuoteRequest,new List<id>{reqLog.id});
        }
        catch(Exception ex){
        }
        
    }
    
    static testMethod void AsyncDerwentWebServiceQuoteAdhoc_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Quote';
            reqLog.Entity_Id__c = '213131313123';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988444',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;  
            AsyncDerwentWebService.getQuote(new List<id>{reqLog.id});
            String QuoteRequest='{\r\n\"Quotes\": [\r\n{\r\n\"Id\": \"bfb73454-5a3a-457e-b8e1-a942ae47fbf8\",\r\n\"Reference\": \"string\",\r\n\"BasketId\": \"string\",\r\n\"AccountingCurrency\": \"string\",\r\n\"Currency\": \"string\",\r\n\"ForHoliday\": true,\r\n\"Products\": [\r\n{\r\n\"Id\": \"string\",\r\n\"AvailabilityId\": \"string\",\r\n\"Type\": \"string\",\r\n\"TypeId\": 9,\r\n\"Product\": {\r\n\"Title\": \"string\",\r\n\"Details\": \"string\",\r\n\"StartType\": \"string\",\r\n\"StartDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"EndDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"ValidFrom\": \"2018-05-22T14:49:52.397Z\",\r\n\"ValidTo\": \"2018-05-22T14:49:52.397Z\",\r\n\"Adults\": 0,\r\n\"ChildAges\": [\r\n0\r\n],\r\n\"Quantity\": 0,\r\n\"PickUpLocation\": \"string\",\r\n\"DropOffLocation\": \"string\",\r\n\"Itinerary\": [\r\n{\r\n\"ItemTime\": \"string\",\r\n\"Description\": \"string\"\r\n}\r\n]\r\n},\r\n\"QuotedCost\": 0,\r\n\"CurrentCost\": 0,\r\n\"Options\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Title\": \"string\",\r\n\"Quantity\": 0,\r\n\"QuotedUnitCost\": 0,\r\n\"CurrentUnitCost\": 0,\r\n\"OnRequest\": true,\r\n\"RestoreFailed\": true,\r\n\"Currency\": \"string\"\r\n}\r\n],\r\n\"StalePrice\": true,\r\n\"RestoreFailed\": true,\r\n\"IsHidden\": true,\r\n\"IsPriceHidden\": true,\r\n\"IsOnRequest\": true,\r\n\"PackageId\": \"string\"\r\n}\r\n],\r\n\"StalePrices\": true,\r\n\"SharedUse\": true,\r\n\"BookingIds\": [\r\n0\r\n],\r\n\"ImpersonatedAgent\": {\r\n\"Reference\": \"string\",\r\n\"Customer\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"ImpersonatedCustomer\": {\r\n\"Id\": \"99988444\",\r\n\"EmailAddress\": \"string\",\r\n\"PhoneNumber\": \"string\",\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Created\": \"2018-05-22T14:38:23.348Z\",\r\n\"CreatedByAgent\": {\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Title\": \"string\",\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"Deposit\": 0,\r\n\"DueDate\": \"2018-05-22T14:38:23.348Z\",\r\n\"Notes\": [\r\n\r\n],\r\n\"DomainId\": 1,\r\n\"TrackingTag\": \"\"\r\n}\r\n],\r\n\"NotFoundQuotes\": [\r\n\"04372647-04b1-0000-a380-ac4c8d3a74d2\"\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetQuoteResponse(QuoteRequest,new List<id>{reqLog.id});
        }
        catch(Exception ex){
        }
        
    }
    
    static testMethod void AsyncDerwentWebServiceQuoteOther_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Quote';
            reqLog.Entity_Id__c = '213131313123';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988444',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;  
            AsyncDerwentWebService.getQuote(new List<id>{reqLog.id});
            String QuoteRequest='{\r\n\"Quotes\": [\r\n{\r\n\"Id\": \"bfb73454-5a3a-457e-b8e1-a942ae47fbf8\",\r\n\"Reference\": \"string\",\r\n\"BasketId\": \"string\",\r\n\"AccountingCurrency\": \"string\",\r\n\"Currency\": \"string\",\r\n\"ForHoliday\": true,\r\n\"Products\": [\r\n{\r\n\"Id\": \"string\",\r\n\"AvailabilityId\": \"string\",\r\n\"Type\": \"string\",\r\n\"TypeId\": 4,\r\n\"Titles\": [\r\n\"string\"\r\n],\r\n\"QuotedCost\": 0,\r\n\"CurrentCost\": 0,\r\n\"Options\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Title\": \"string\",\r\n\"Quantity\": 0,\r\n\"QuotedUnitCost\": 0,\r\n\"CurrentUnitCost\": 0,\r\n\"OnRequest\": true,\r\n\"RestoreFailed\": true,\r\n\"Currency\": \"string\"\r\n}\r\n],\r\n\"Alternatives\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Description\": \"string\",\r\n\"Cost\": 0\r\n}\r\n],\r\n\"StalePrice\": true,\r\n\"RestoreFailed\": true,\r\n\"IsHidden\": true,\r\n\"IsPriceHidden\": true,\r\n\"IsOnRequest\": true,\r\n\"PackageId\": \"string\"\r\n}\r\n],\r\n\"StalePrices\": true,\r\n\"SharedUse\": true,\r\n\"BookingIds\": [\r\n0\r\n],\r\n\"ImpersonatedAgent\": {\r\n\"Reference\": \"string\",\r\n\"Customer\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"ImpersonatedCustomer\": {\r\n\"Id\": \"string\",\r\n\"EmailAddress\": \"string\",\r\n\"PhoneNumber\": \"string\",\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Created\": \"2018-05-22T14:38:23.348Z\",\r\n\"CreatedByAgent\": {\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Title\": \"string\",\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"Deposit\": 0,\r\n\"DueDate\": \"2018-05-22T14:38:23.348Z\",\r\n\"Notes\": [\r\n{\r\n\"Id\": \"teetet\",\r\n\"Text\": \"string\",\r\n\"Created\": \"2018-05-22T14:38:23.348Z\",\r\n\"CreatedById\": 0,\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"DomainId\": 1,\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundQuotes\": [\r\n\"04372647-04b1-0000-a380-ac4c8d3a74d2\"\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetQuoteResponse(QuoteRequest,new List<id>{reqLog.id});
        }
        catch(Exception ex){
        }
        
    }
    
    static testMethod void AsyncDerwentWebServiceQuoteFlight_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Quote';
            reqLog.Entity_Id__c = '213131313123';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988111',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;  
            AsyncDerwentWebService.getQuote(new List<id>{reqLog.id});
            String QuoteRequest='{\r\n\"Quotes\": [\r\n{\r\n\"Id\": \"bfb73454-5a3a-457e-b8e1-a942ae47fbf8\",\r\n\"Reference\": \"string\",\r\n\"BasketId\": \"string\",\r\n\"AccountingCurrency\": \"string\",\r\n\"Currency\": \"string\",\r\n\"ForHoliday\": true,\r\n\"Products\": [\r\n{\r\n\"Id\": \"string\",\r\n\"AvailabilityId\": \"string\",\r\n\"Type\": \"string\",\r\n\"TypeId\": 1,\r\n\"OutboundLeg\": {\r\n\"TypeId\": 0,\r\n\"Type\": \"string\",\r\n\"Segments\": [\r\n{\r\n\"CarrierName\": \"string\",\r\n\"CodeshareAirlineName\": \"string\",\r\n\"CabinName\": \"string\",\r\n\"Cabin\": 0,\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DepartureAirportCode\": \"string\",\r\n\"DepartureAirportTitle\": \"string\",\r\n\"DepartureTerminal\": \"string\",\r\n\"ArrivalDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DestinationAirportCode\": \"string\",\r\n\"DestinationAirportTitle\": \"string\",\r\n\"DestinationTerminal\": \"string\",\r\n\"ZonedDepartureDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"ZonedArrivalDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"Logo\": \"string\",\r\n\"SupplierFareClass\": \"string\"\r\n}\r\n]\r\n},\r\n\"InboundLeg\": {\r\n\"TypeId\": 0,\r\n\"Type\": \"string\",\r\n\"Segments\": [\r\n{\r\n\"CarrierName\": \"string\",\r\n\"CodeshareAirlineName\": \"string\",\r\n\"CabinName\": \"string\",\r\n\"Cabin\": 0,\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DepartureAirportCode\": \"string\",\r\n\"DepartureAirportTitle\": \"string\",\r\n\"DepartureTerminal\": \"string\",\r\n\"ArrivalDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DestinationAirportCode\": \"string\",\r\n\"DestinationAirportTitle\": \"string\",\r\n\"DestinationTerminal\": \"string\",\r\n\"ZonedDepartureDate\": \"string\",\r\n\"ZonedArrivalDate\": \"string\",\r\n\"Logo\": \"string\",\r\n\"SupplierFareClass\": \"string\"\r\n}\r\n]\r\n},\r\n\"Legs\": [\r\n{\r\n\"TypeId\": 0,\r\n\"Type\": \"string\",\r\n\"Segments\": [\r\n{\r\n\"CarrierName\": \"string\",\r\n\"CodeshareAirlineName\": \"string\",\r\n\"CabinName\": \"string\",\r\n\"Cabin\": 0,\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DepartureAirportCode\": \"string\",\r\n\"DepartureAirportTitle\": \"string\",\r\n\"DepartureTerminal\": \"string\",\r\n\"ArrivalDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DestinationAirportCode\": \"string\",\r\n\"DestinationAirportTitle\": \"string\",\r\n\"DestinationTerminal\": \"string\",\r\n\"ZonedDepartureDate\": \"2018-05-22T14:49:52.397\",\r\n\"ZonedArrivalDate\": \"2018-05-22T14:49:52.397\",\r\n\"Logo\": \"string\",\r\n\"SupplierFareClass\": \"string\"\r\n}\r\n]\r\n}\r\n],\r\n\"Adults\": 0,\r\n\"ChildAges\": [\r\n0\r\n],\r\n\"QuotedCost\": 0,\r\n\"CurrentCost\": 0,\r\n\"Options\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Title\": \"string\",\r\n\"Quantity\": 0,\r\n\"QuotedUnitCost\": 0,\r\n\"CurrentUnitCost\": 0,\r\n\"OnRequest\": true,\r\n\"RestoreFailed\": true,\r\n\"Currency\": \"string\"\r\n}\r\n],\r\n\"Alternatives\": [\r\n{\r\n\"Id\": \"string\",\r\n\"Legs\": [\r\n{\r\n\"TypeId\": 0,\r\n\"Type\": \"string\",\r\n\"Segments\": [\r\n{\r\n\"CarrierName\": \"string\",\r\n\"CodeshareAirlineName\": \"string\",\r\n\"CabinName\": \"string\",\r\n\"Cabin\": 0,\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DepartureAirportCode\": \"string\",\r\n\"DepartureAirportTitle\": \"string\",\r\n\"DepartureTerminal\": \"string\",\r\n\"ArrivalDate\": \"2018-05-22T14:49:52.397Z\",\r\n\"DestinationAirportCode\": \"string\",\r\n\"DestinationAirportTitle\": \"string\",\r\n\"DestinationTerminal\": \"string\",\r\n\"ZonedDepartureDate\": \"string\",\r\n\"ZonedArrivalDate\": \"string\",\r\n\"Logo\": \"string\",\r\n\"SupplierFareClass\": \"string\"\r\n}\r\n]\r\n}\r\n],\r\n\"Cost\": 0\r\n}\r\n],\r\n\"StalePrice\": true,\r\n\"RestoreFailed\": true,\r\n\"IsHidden\": true,\r\n\"IsPriceHidden\": true,\r\n\"IsOnRequest\": true,\r\n\"PackageId\": \"string\"\r\n}\r\n],\r\n\"StalePrices\": true,\r\n\"SharedUse\": true,\r\n\"BookingIds\": [\r\n0\r\n],\r\n\"ImpersonatedAgent\": {\r\n\"Reference\": \"string\",\r\n\"Customer\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"ImpersonatedCustomer\": {\r\n\"Id\": \"99988111\",\r\n\"EmailAddress\": \"string\",\r\n\"PhoneNumber\": \"string\",\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"LoyaltyNumber\": \"string\"\r\n},\r\n\"Created\": \"2018-05-22T14:38:23.348Z\",\r\n\"CreatedByAgent\": {\r\n\"Id\": 0,\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"FullName\": \"string\",\r\n\"Email\": \"string\",\r\n\"IsSharedAccount\": true,\r\n\"Active\": true,\r\n\"Title\": \"string\",\r\n\"Agency\": {\r\n\"Id\": 0,\r\n\"AgencyType\": 0,\r\n\"Name\": \"string\",\r\n\"AbtaNumber\": \"string\",\r\n\"VatNumber\": \"string\"\r\n}\r\n},\r\n\"Deposit\": 0,\r\n\"DueDate\": \"2018-05-22T14:38:23.348Z\",\r\n\"Notes\": [\r\n\r\n],\r\n\"DomainId\": 1,\r\n\"TrackingTag\": \"\"\r\n}\r\n],\r\n\"NotFoundQuotes\": [\r\n\"04372647-04b1-0000-a380-ac4c8d3a74d2\"\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetQuoteResponse(QuoteRequest,new List<id>{reqLog.id});
        } catch(Exception ex){
        }
        
        
    }
    
    static testMethod void AsyncDerwentWebServiceFlightBooking_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"99988333\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"Flights\": [\r\n{\r\n\"ItineraryId\": 0,\r\n\"Adults\": 0,\r\n\"Children\": 0,\r\n\"Infants\": 0,\r\n\"ItineraryType\": 0,\r\n\"AirlineLocator\": \"string\",\r\n\"Segments\": [\r\n{\r\n\"DepartureDate\": \"2018-05-17T15:47:46.730Z\",\r\n\"DepartureAirport\": \"string\",\r\n\"DepartureTerminal\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.730Z\",\r\n\"ArrivalAirport\": \"string\",\r\n\"ArrivalTerminal\": \"string\",\r\n\"FlightNumber\": \"string\",\r\n\"Description\": \"string\",\r\n\"Cabin\": 0,\r\n\"Aircraft\": \"string\",\r\n\"MarketingCarrier\": \"string\",\r\n\"OperatingCarrier\": \"string\",\r\n\"BookingClass\": \"string\",\r\n\"AirlineLocator\": \"string\"\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\": 1\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    static testMethod void AsyncDerwentWebServiceOtherBooking_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"VendorCode\": \"string\",\r\n\"VendorName\": \"string\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpPointCode\": \"string\",\r\n\"PickUpPointName\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"DropOffPointCode\": \"string\",\r\n\"DropOffPointName\": \"string\",\r\n\"CarDescription\": \"string\",\r\n\"SIPPCode\": \"string\",\r\n\"DoorCount\": 0,\r\n\"Model\": \"string\",\r\n\"ConnectingFlight\": {\r\n\"FlightNumber\": \"string\"\r\n},\r\n\"BookingType\": 1\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceaccomodationitinerary_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"Stays\": [\r\n{\r\n\"CheckIn\": \"2018-05-17T15:47:46.729Z\",\r\n\"CheckOut\": \"2018-05-17T15:47:46.729Z\",\r\n\"EstabId\": 0,\r\n\"EstabName\": \"string\",\r\n\"StarRating\": 0,\r\n\"DestinationName\": \"string\",\r\n\"Description\": \"string\",\r\n\"Rooms\": [\r\n{\r\n\"ItineraryId\": 0,\r\n\"RoomType\": \"string\",\r\n\"BoardType\": \"string\",\r\n\"AdditionalBoardDesc\": \"string\",\r\n\"Adults\": 0,\r\n\"Children\": 0,\r\n\"Infants\": 0\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\": 8\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceairportParking_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"AirportCode\": \"string\",\r\n\"AirportName\": \"string\",\r\n\"ParkingSiteCode\": \"string\",\r\n\"ParkingSiteName\": \"string\",\r\n\"Notes\": \"string\",\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"BookingType\": 16\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"Version\": \"234545353\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
            
            
            String BookingRequest1='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"AirportCode\": \"string\",\r\n\"AirportName\": \"string\",\r\n\"ParkingSiteCode\": \"string\",\r\n\"ParkingSiteName\": \"string\",\r\n\"Notes\": \"string\",\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"BookingType\": 16\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"Version\": \"234545353\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest1,new List<id>{reqLog.id});

			String BookingRequest2='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"AirportCode\": \"string\",\r\n\"AirportName\": \"string\",\r\n\"ParkingSiteCode\": \"string\",\r\n\"ParkingSiteName\": \"string\",\r\n\"Notes\": \"string\",\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"BookingType\": 16\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"Version\": \"234545354\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest2,new List<id>{reqLog.id});
           }catch(Exception ex){
           }        
    }

    static testMethod void AsyncDerwentWebServiceairportParking_Test_TRP() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"testbookingreftestbookingref\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"AirportCode\": \"string\",\r\n\"AirportName\": \"string\",\r\n\"ParkingSiteCode\": \"string\",\r\n\"ParkingSiteName\": \"string\",\r\n\"Notes\": \"string\",\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"BookingType\": 16\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"Version\": \"234545353\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
            
            Booking__c bk = [select id,name,org_booking_ref__c,Derwent_Version_Number__c from Booking__c where org_booking_ref__c = 'testbookingreftestbookingref'];
            system.debug('Bookingbk ' + bk.Derwent_Version_Number__c);
            
            String BookingRequest1='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"testbookingreftestbookingref\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"AirportCode\": \"string\",\r\n\"AirportName\": \"string\",\r\n\"ParkingSiteCode\": \"string\",\r\n\"ParkingSiteName\": \"string\",\r\n\"Notes\": \"string\",\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"BookingType\": 16\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"Version\": \"234545353\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest1,new List<id>{reqLog.id});
            
            String BookingRequest2='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"testbookingreftestbookingref\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"string\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"DropOffDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"PickUpDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"AirportCode\": \"string\",\r\n\"AirportName\": \"string\",\r\n\"ParkingSiteCode\": \"string\",\r\n\"ParkingSiteName\": \"string\",\r\n\"Notes\": \"string\",\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.729Z\"\r\n},\r\n\"BookingType\": 16\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"Version\": \"234545353\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest2,new List<id>{reqLog.id});
           }catch(Exception ex){
           }        
    }
    
    static testMethod void AsyncDerwentWebServiceAttractBooking_Test() {
        try{  Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '999882772';
            reqLog.Status__c = 'New';
            insert reqLog;
            AsyncDerwentWebService.getBooking(new List<id>{reqLog.id});
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988277',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;        
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"99988277\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"Tickets\": [\r\n{\r\n\"ItineraryId\": 0,\r\n\"Description\": \"string\",\r\n\"StartDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"EndDate\": \"2018-05-17T15:47:46.729Z\",\r\n\"Adults\": 0,\r\n\"Children\": 0,\r\n\"Infants\": 0,\r\n\"Destination\": {\r\n\"ItineraryId\": 0,\r\n\"ProvinceId\": 0,\r\n\"RegionId\": 0,\r\n\"RegionTitle\": \"string\"\r\n}\r\n}\r\n],\r\n\"BookingType\": 2\r\n},\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}\r\n';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }
        catch(Exception ex){
        }
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceTransferBooking_Test() {
        try{  Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='999882678',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            
            String BookingRequest='{\r\n\"Trips\": [\r\n{\r\n\"TripId\": 0,\r\n\"Bookings\": [\r\n{\r\n\"BookingCore\": {\r\n\"Id\": 0,\r\n\"Type\": 1,\r\n\"BookingRef\": \"string\",\r\n\"BookedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"Status\": 1,\r\n\"DomainId\": 1,\r\n\"CultureCode\": \"string\",\r\n\"PackageId\": \"string\"\r\n},\r\n\"BookingDetail\": {\r\n\"Title\": \"string\",\r\n\"BookedById\": 0,\r\n\"BookedBy\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientCurrencyExchangeRate\": 0,\r\n\"SpecialRequests\": \"string\",\r\n\"UserId\": \"999882678\",\r\n\"LastModified\": \"2018-05-17T15:32:52.416Z\",\r\n\"ApplicationType\": 0,\r\n\"FamilyId\": \"string\",\r\n\"CustomMetadata\": \"string\"\r\n},\r\n\"LeadContact\": {\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"LastName\": \"string\",\r\n\"AddressLine1\": \"string\",\r\n\"AddressLine2\": \"string\",\r\n\"AddressLine3\": \"string\",\r\n\"AddressLine4\": \"string\",\r\n\"County\": \"string\",\r\n\"PostCode\": \"string\",\r\n\"CountryCode\": \"string\",\r\n\"Email\": \"string\",\r\n\"PhoneHome\": \"string\",\r\n\"PhoneMobile\": \"string\",\r\n\"PhoneWork\": \"string\",\r\n\"AllowTexts\": true\r\n},\r\n\"CancellationDetails\": {\r\n\"CancellationRequested\": true,\r\n\"Requested\": \"2018-05-17T15:32:52.416Z\",\r\n\"Confirmed\": \"2018-05-17T15:32:52.416Z\"\r\n},\r\n\"Itinerary\": {\r\n\"Transfers\": [\r\n{\r\n\"ItineraryId\": 0,\r\n\"ItineraryDate\": \"2018-05-17T15:47:46.730Z\",\r\n\"PickUpPoint\": {\r\n},\r\n\"DropOffPoint\": {\r\n},\r\n\"TransferTitle\": \"string\",\r\n\"Address\": \"string\",\r\n\"Adults\": 0,\r\n\"Children\": 0,\r\n\"Infants\": 0,\r\n\"OutboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"ArrivalDate\": \"2018-05-17T15:47:46.730Z\"\r\n},\r\n\"InboundFlight\": {\r\n\"FlightNumber\": \"string\",\r\n\"DepartureDate\": \"2018-05-17T15:47:46.730Z\"\r\n}\r\n}\r\n],\r\n\"BookingType\": 32\r\n}\r\n,\r\n\"Passengers\": [\r\n{\r\n\"Id\": 0,\r\n\"AgeCategory\": 1,\r\n\"Title\": \"string\",\r\n\"FirstName\": \"string\",\r\n\"MiddleName\": \"string\",\r\n\"SurName\": \"string\",\r\n\"DateOfBirth\": \"2018-05-17T15:32:52.416Z\",\r\n\"AgeOnReturn\": 0,\r\n\"ItineraryId\": 0,\r\n\"TicketNumber\": \"string\"\r\n}\r\n],\r\n\"LineItems\": [\r\n{\r\n\"Id\": 0,\r\n\"ItemTypeId\": 0,\r\n\"ItemTypeTitle\": \"string\",\r\n\"ItemTypeGroupId\": 0,\r\n\"CostType\": \"string\",\r\n\"Quantity\": 0,\r\n\"SupplierId\": 0,\r\n\"SupplierRef\": \"string\",\r\n\"Title\": \"string\",\r\n\"SupplierNet\": 0,\r\n\"SupplierNetLocal\": 0,\r\n\"SupplierCommission\": 0,\r\n\"SupplierVat\": 0,\r\n\"SalesTax\": 0,\r\n\"SupplierGross\": 0,\r\n\"SupplierCurrency\": \"string\",\r\n\"SupplierExchangeRate\": 0,\r\n\"SupplierBalanceDue\": \"2018-05-17T15:32:52.416Z\",\r\n\"ClientGross\": 0,\r\n\"Memo\": \"string\",\r\n\"CreateDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"AccountingExchangeRate\": 0,\r\n\"ReverseBookedItemId\": 0,\r\n\"LinkedNonSystemBookedItemId\": 0,\r\n\"ItineraryId\": 0,\r\n\"NonSystem\": true,\r\n\"OptionalExtraType\": 0,\r\n\"HiddenFromCustomer\": true,\r\n\"IsPriceHidden\": true\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"Id\": 0,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n],\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 0,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"Status\": 1,\r\n\"TextAlerts\": true,\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true,\r\n\"ResponseRequiredDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"TaskStatusChangedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"ResponseRequired\": true,\r\n\"IsTravelChange\": true,\r\n\"Questions\": [\r\n{\r\n\"QuestionId\": 0,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AnswerDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"PublicAgentName\": \"string\"\r\n}\r\n],\r\n\"Notes\": [\r\n{\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"CreatedByCustomer\": true,\r\n\"PublicAgentName\": \"string\",\r\n\"Public\": true\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\": {\r\n\"TotalCost\": 0,\r\n\"ClientTotalCost\": 0,\r\n\"TotalMargin\": 0,\r\n\"DueDate\": \"2018-05-17T15:32:52.416Z\",\r\n\"AmountDue\": 0,\r\n\"AccountingCurrencyCode\": \"string\",\r\n\"ClientCurrencyCode\": \"string\",\r\n\"ClientExchangeRate\": 0,\r\n\"ClientAmountDue\": 0\r\n},\r\n\"TicketInfo\": {\r\n\"TicketsSent\": \"2018-05-17T15:32:52.416Z\",\r\n\"TodText\": \"string\",\r\n\"ETickets\": true\r\n},\r\n\"TrackingTag\": \"string\",\r\n\"AgentNotes\": [\r\n{\r\n\"Id\": 0,\r\n\"Title\": \"string\",\r\n\"Description\": \"string\",\r\n\"CreatedById\": 0,\r\n\"CreatedDate\": \"2018-07-11T08:49:41.883Z\",\r\n\"CreatedBy\": \"string\"\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundBookings\": [\r\n1\r\n]\r\n}\r\n';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }
        catch(Exception ex){
        }
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceBookingAccomodationItinerary_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\":[\r\n{\r\n\"TripId\":16944472,\r\n\"Bookings\":[\r\n{\r\n\"BookingCore\":{\r\n\"Id\":16944472,\r\n\"Type\":8,\r\n\"BookingRef\":\"16944472\",\r\n\"BookedDate\":\"2018-07-20T14:53:01.497\",\r\n\"Status\":2,\r\n\"DomainId\":34,\r\n\"CultureCode\":\"en-bz\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-BZ\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"TravelscapeLLC,TravelscapeLLC:KingGeorge,ALuxuryCollectionHotelinAthens,Athens(2nights)\",\r\n\"BookedById\":2764,\r\n\"BookedBy\":\"KumarSubramaniam\",\r\n\"AgentEmail\":\"s.kumar@dnata.com\",\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"b2154fd7-05fb-4f8d-98b3-4c8c7a20f902\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-05-16T15:17:48.633\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"3ce2c1e0-4ff9-4cf0-a0f8-1fa212f40305\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":\"295\",\r\n\"OfficeName\":\"dt-Retail\",\r\n\"UtmId\":null,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Mrs\",\r\n\"FirstName\":\"CBUM\",\r\n\"LastName\":\"CB\",\r\n\"AddressLine1\":\"A1CBUM\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"\",\r\n\"County\":\"\",\r\n\"PostCode\":\"\",\r\n\"CountryCode\":\"AE\",\r\n\"Email\":\"\",\r\n\"PhoneHome\":\"114258\",\r\n\"PhoneMobile\":\"\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":true\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Stays\":[\r\n{\r\n\"CheckIn\":\"2018-08-08T00:00:00\",\r\n\"CheckOut\":\"2018-08-10T00:00:00\",\r\n\"EstabId\":230212,\r\n\"EstabName\":\"KingGeorge,ALuxuryCollectionHotel\",\r\n\"StarRating\":5,\r\n\"Description\":\"KingGeorge,ALuxuryCollectionHotelinAthens,Athens(08Aug2018for2nights)\",\r\n\"Destination\":{\r\n\"Name\":\"Athens,Athens\",\r\n\"Country\":\"Greece\",\r\n\"Province\":\"Athens\",\r\n\"Location\":\"Athens\"\r\n},\r\n\"Rooms\":[\r\n{\r\n\"ItineraryId\":29705200,\r\n\"RoomType\":\"ClassicRoom\",\r\n\"BoardType\":\"BedandBreakfast\",\r\n\"AdditionalBoardDesc\":\"\",\r\n\"Adults\":1,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"SpecialRequests\":\"PleaseNonSmokingroomsandprovideadjacentrooms.NOTETOHOTELIER:Pleasenotethisisroom1ofa2roombooking.Room2(MrMONEEFALMONEEF)istheother.Pleasedonotsplitthegroupup.\"\r\n},\r\n{\r\n\"ItineraryId\":29705201,\r\n\"RoomType\":\"ClassicRoom\",\r\n\"BoardType\":\"BedandBreakfast\",\r\n\"AdditionalBoardDesc\":\"\",\r\n\"Adults\":2,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"SpecialRequests\":\"PleaseNonSmokingroomsandprovideadjacentrooms.NOTETOHOTELIER:Pleasenotethisisroom2ofa2roombooking.Room1(MsMANARALMONEEF)istheother.Pleasedonotsplitthegroupup.\"\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\":8\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":38367465,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"CBUM\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUM\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":29705200,\r\n\"TicketNumber\":\"150196135346\"\r\n},\r\n{\r\n\"Id\":38367466,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"CBUM\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUM\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":29705201,\r\n\"TicketNumber\":\"150196138063\"\r\n},\r\n{\r\n\"Id\":38367467,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"CBUM\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUM\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":29705201,\r\n\"TicketNumber\":\"150196138063\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":89698632,\r\n\"ItemTypeId\":81,\r\n\"ItemTypeTitle\":\"ClientCostAdjustment\",\r\n\"ItemTypeGroupId\":0,\r\n\"CostType\":\"Default\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2,\r\n\"SupplierName\":\"TravelRepublic\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"BalanceAdjustment\",\r\n\"SupplierNet\":0.0000,\r\n\"SupplierNetLocal\":0.0000,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-08T00:00:00\",\r\n\"ClientGross\":-0.0001,\r\n\"Memo\":\"SystemAdjustmentforWriteoff21Jul2018\",\r\n\"CreateDate\":\"2018-07-21T02:06:44.947\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":true,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690173,\r\n\"ItemTypeId\":17,\r\n\"ItemTypeTitle\":\"Accommodation\",\r\n\"ItemTypeGroupId\":1,\r\n\"CostType\":\"Accommodation\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2050,\r\n\"SupplierName\":\"TravelscapeLLC\",\r\n\"SupplierRef\":\"312769276\",\r\n\"Title\":\"ClassicRoom,BedandBreakfast(1Adult)\",\r\n\"SupplierNet\":661.9907,\r\n\"SupplierNetLocal\":869.5900,\r\n\"SupplierCommission\":63.0865,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":952.4600,\r\n\"SupplierCurrency\":\"USD\",\r\n\"SupplierExchangeRate\":3.700000,\r\n\"SupplierBalanceDue\":\"2018-08-15T00:00:00\",\r\n\"ClientGross\":725.2624,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:53:01.633\",\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.860310,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":29705200,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690174,\r\n\"ItemTypeId\":17,\r\n\"ItemTypeTitle\":\"Accommodation\",\r\n\"ItemTypeGroupId\":1,\r\n\"CostType\":\"Accommodation\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2050,\r\n\"SupplierName\":\"TravelscapeLLC\",\r\n\"SupplierRef\":\"312769288\",\r\n\"Title\":\"ClassicRoom,BedandBreakfast(2Adults)\",\r\n\"SupplierNet\":699.8154,\r\n\"SupplierNetLocal\":919.2750,\r\n\"SupplierCommission\":66.6912,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":1006.8800,\r\n\"SupplierCurrency\":\"USD\",\r\n\"SupplierExchangeRate\":3.700000,\r\n\"SupplierBalanceDue\":\"2018-08-15T00:00:00\",\r\n\"ClientGross\":766.6178,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:53:01.64\",\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.860310,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":29705201,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":1491.8801,\r\n\"ClientTotalCost\":7250.9997688310000000,\r\n\"TotalMargin\":130.0740,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.0000,\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.860310,\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":0.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":2050,\r\n\"SupplierName\":\"TravelscapeLLC\",\r\n\"BookingInfos\":[]\r\n},\r\n\"Version\":5173907136\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundTrips\":[]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceBookingFlightItinerary_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\":[\r\n{\r\n\"TripId\":16944478,\r\n\"Bookings\":[\r\n{\r\n\"BookingCore\":{\r\n\"Id\":16944477,\r\n\"Type\":1,\r\n\"BookingRef\":\"16944477\",\r\n\"BookedDate\":\"2018-07-20T14:54:45.983\",\r\n\"Status\":2,\r\n\"DomainId\":1,\r\n\"CultureCode\":\"en-gb\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-GB\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"Ryanair(Travelfusion):Dublin-Amsterdam\",\r\n\"BookedById\":5,\r\n\"BookedBy\":\"System\",\r\n\"AgentEmail\":\"\",\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"1d66836b-d9f8-4799-8a22-362c3c8cf1ac\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-05-16T15:17:48.633\",\r\n\"ApplicationType\":2,\r\n\"FamilyId\":\"beffb696-5020-4f89-8ee3-e638e88e6608\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":\"\",\r\n\"OfficeName\":\"\",\r\n\"UtmId\":null,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Mrs\",\r\n\"FirstName\":\"CBUR\",\r\n\"LastName\":\"CB\",\r\n\"AddressLine1\":\"A1CBUR\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"\",\r\n\"County\":\"\",\r\n\"PostCode\":\"\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"\",\r\n\"PhoneHome\":\"311586\",\r\n\"PhoneMobile\":\"\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":true\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Flights\":[\r\n{\r\n\"ItineraryType\":1,\r\n\"ItineraryId\":29705208,\r\n\"Adults\":0,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"AirlineLocator\":null,\r\n\"Segments\":[\r\n{\r\n\"DepartureDate\":\"2018-08-26T11:05:00\",\r\n\"DepartureAirport\":\"DUB\",\r\n\"DepartureTerminal\":null,\r\n\"ArrivalDate\":\"2018-08-26T13:45:00\",\r\n\"ArrivalAirport\":\"AMS\",\r\n\"ArrivalTerminal\":null,\r\n\"FlightNumber\":\"FR3102\",\r\n\"Description\":\"Dublin260818arrivesAmsterdam260818(FR3102)\",\r\n\"Cabin\":1,\r\n\"Aircraft\":null,\r\n\"MarketingCarrier\":\"FR\",\r\n\"OperatingCarrier\":\"FR\",\r\n\"BookingClass\":null,\r\n\"AirlineLocator\":null\r\n}\r\n]\r\n},\r\n{\r\n\"ItineraryType\":2,\r\n\"ItineraryId\":29705209,\r\n\"Adults\":0,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"AirlineLocator\":null,\r\n\"Segments\":[\r\n{\r\n\"DepartureDate\":\"2018-08-29T18:35:00\",\r\n\"DepartureAirport\":\"AMS\",\r\n\"DepartureTerminal\":null,\r\n\"ArrivalDate\":\"2018-08-29T19:15:00\",\r\n\"ArrivalAirport\":\"DUB\",\r\n\"ArrivalTerminal\":null,\r\n\"FlightNumber\":\"FR3105\",\r\n\"Description\":\"Amsterdam290818arrivesDublin290818(FR3105)\",\r\n\"Cabin\":1,\r\n\"Aircraft\":null,\r\n\"MarketingCarrier\":\"FR\",\r\n\"OperatingCarrier\":\"FR\",\r\n\"BookingClass\":null,\r\n\"AirlineLocator\":null\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\":1\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":38367478,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mrs\",\r\n\"FirstName\":\"CBUR\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUR\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":0,\r\n\"TicketNumber\":\"\"\r\n},\r\n{\r\n\"Id\":38367479,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"CBUR\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUR\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":0,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":89698921,\r\n\"ItemTypeId\":82,\r\n\"ItemTypeTitle\":\"ClientCostAdjustment\",\r\n\"ItemTypeGroupId\":0,\r\n\"CostType\":\"Default\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2,\r\n\"SupplierName\":\"TravelRepublic\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"BalanceAdjustment\",\r\n\"SupplierNet\":0.0000,\r\n\"SupplierNetLocal\":0.0000,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":0.0001,\r\n\"Memo\":\"SystemAdjustmentforClawback21Jul2018\",\r\n\"CreateDate\":\"2018-07-21T02:06:46.963\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":true,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690193,\r\n\"ItemTypeId\":292,\r\n\"ItemTypeTitle\":\"PhysicalCardCharge\",\r\n\"ItemTypeGroupId\":0,\r\n\"CostType\":\"Default\",\r\n\"Quantity\":1,\r\n\"SupplierId\":1084,\r\n\"SupplierName\":\"BarclaycardRebate\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"VirtualCardCharge\",\r\n\"SupplierNet\":0.0000,\r\n\"SupplierNetLocal\":0.0000,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0000,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.063\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":true,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690194,\r\n\"ItemTypeId\":441,\r\n\"ItemTypeTitle\":\"PayPalFee\",\r\n\"ItemTypeGroupId\":16,\r\n\"CostType\":\"PaymentFee\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2850,\r\n\"SupplierName\":\"PaypalProvider\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"PayPalFee(0.000%)\",\r\n\"SupplierNet\":2.0028,\r\n\"SupplierNetLocal\":2.0028,\r\n\"SupplierCommission\":-2.0028,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0000,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.067\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690190,\r\n\"ItemTypeId\":223,\r\n\"ItemTypeTitle\":\"AirlineFailureProtectionFee\",\r\n\"ItemTypeGroupId\":5,\r\n\"CostType\":\"Flight\",\r\n\"Quantity\":2,\r\n\"SupplierId\":3030,\r\n\"SupplierName\":\"Covermore\",\r\n\"SupplierRef\":\"16944477\",\r\n\"Title\":\"FlightProtectionFee\",\r\n\"SupplierNet\":0.2500,\r\n\"SupplierNetLocal\":0.2500,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.2500,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.06\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690189,\r\n\"ItemTypeId\":1,\r\n\"ItemTypeTitle\":\"AdultReturnTicket\",\r\n\"ItemTypeGroupId\":5,\r\n\"CostType\":\"Flight\",\r\n\"Quantity\":2,\r\n\"SupplierId\":6520,\r\n\"SupplierName\":\"Ryanair(Travelfusion)\",\r\n\"SupplierRef\":\"X2IJ5D\",\r\n\"Title\":\"AdultReturnTicket\",\r\n\"SupplierNet\":73.9556,\r\n\"SupplierNetLocal\":82.6000,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":82.6000,\r\n\"SupplierCurrency\":\"EUR\",\r\n\"SupplierExchangeRate\":0.895346,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":74.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.06\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690191,\r\n\"ItemTypeId\":13,\r\n\"ItemTypeTitle\":\"Discount\",\r\n\"ItemTypeGroupId\":12,\r\n\"CostType\":\"Discount\",\r\n\"Quantity\":2,\r\n\"SupplierId\":6520,\r\n\"SupplierName\":\"Ryanair(Travelfusion)\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"Discount\",\r\n\"SupplierNet\":-2.7398,\r\n\"SupplierNetLocal\":-3.0600,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":-3.0600,\r\n\"SupplierCurrency\":\"EUR\",\r\n\"SupplierExchangeRate\":0.895346,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":-2.7398,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.06\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690192,\r\n\"ItemTypeId\":1615,\r\n\"ItemTypeTitle\":\"BookingFee\",\r\n\"ItemTypeGroupId\":5,\r\n\"CostType\":\"Flight\",\r\n\"Quantity\":1,\r\n\"SupplierId\":6550,\r\n\"SupplierName\":\"Travelfusion\",\r\n\"SupplierRef\":\"16944477\",\r\n\"Title\":\"TravelfusionBookingFee\",\r\n\"SupplierNet\":1.0000,\r\n\"SupplierNetLocal\":1.0000,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":1.2000,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T11:05:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.063\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":true,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":142.5205,\r\n\"ClientTotalCost\":142.5205000000000000,\r\n\"TotalMargin\":-3.4139,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.0000,\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":0.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":6520,\r\n\"SupplierName\":\"Ryanair(Travelfusion)\",\r\n\"BookingInfos\":[]\r\n},\r\n\"Version\":5173907148\r\n},\r\n{\r\n\"BookingCore\":{\r\n\"Id\":16944478,\r\n\"Type\":8,\r\n\"BookingRef\":\"ACM16944478\",\r\n\"BookedDate\":\"2018-07-20T14:54:46.14\",\r\n\"Status\":2,\r\n\"DomainId\":1,\r\n\"CultureCode\":\"en-gb\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-GB\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"TravelscapeLLC:RamadaApolloinAmsterdam,Amsterdam(3nights)\",\r\n\"BookedById\":5,\r\n\"BookedBy\":\"System\",\r\n\"AgentEmail\":\"\",\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"ClientsduetoarriveatAmsterdamairportonSun26August2018at13:45flightnoFR3102fromDublin.\",\r\n\"UserId\":\"1d66836b-d9f8-4799-8a22-362c3c8cf1ac\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-05-16T15:17:48.633\",\r\n\"ApplicationType\":2,\r\n\"FamilyId\":\"beffb696-5020-4f89-8ee3-e638e88e6608\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":\"\",\r\n\"OfficeName\":\"\",\r\n\"UtmId\":null,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Mrs\",\r\n\"FirstName\":\"CBUS\",\r\n\"LastName\":\"CB\",\r\n\"AddressLine1\":\"A1CBUS\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"\",\r\n\"County\":\"\",\r\n\"PostCode\":\"\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"\",\r\n\"PhoneHome\":\"311586\",\r\n\"PhoneMobile\":\"\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":true\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Stays\":[\r\n{\r\n\"CheckIn\":\"2018-08-26T00:00:00\",\r\n\"CheckOut\":\"2018-08-29T00:00:00\",\r\n\"EstabId\":2763432,\r\n\"EstabName\":\"RamadaApollo\",\r\n\"StarRating\":4,\r\n\"Description\":\"RamadaApolloinAmsterdam,Amsterdam(26Aug2018for3nights)\",\r\n\"Destination\":{\r\n\"Name\":\"Amsterdam,Amsterdam\",\r\n\"Country\":\"Netherlands\",\r\n\"Province\":\"Amsterdam\",\r\n\"Location\":\"Amsterdam\"\r\n},\r\n\"Rooms\":[\r\n{\r\n\"ItineraryId\":29705210,\r\n\"RoomType\":\"DeluxeRoomView\",\r\n\"BoardType\":\"RoomOnly\",\r\n\"AdditionalBoardDesc\":\"\",\r\n\"Adults\":2,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"SpecialRequests\":\"\"\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\":8\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":38367480,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mrs\",\r\n\"FirstName\":\"CBUS\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUS\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":29705210,\r\n\"TicketNumber\":\"150196186785\"\r\n},\r\n{\r\n\"Id\":38367481,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"CBUS\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"SCBUS\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":29705210,\r\n\"TicketNumber\":\"150196186785\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":89690196,\r\n\"ItemTypeId\":2600,\r\n\"ItemTypeTitle\":\"AdminFee\",\r\n\"ItemTypeGroupId\":0,\r\n\"CostType\":\"Default\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2,\r\n\"SupplierName\":\"TravelRepublic\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"AdminFee\",\r\n\"SupplierNet\":0.0000,\r\n\"SupplierNetLocal\":0.0000,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0000,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":0.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T00:00:00\",\r\n\"ClientGross\":3.9500,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.18\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690195,\r\n\"ItemTypeId\":17,\r\n\"ItemTypeTitle\":\"Accommodation\",\r\n\"ItemTypeGroupId\":1,\r\n\"CostType\":\"Accommodation\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2050,\r\n\"SupplierName\":\"TravelscapeLLC\",\r\n\"SupplierRef\":\"312769417\",\r\n\"Title\":\"DeluxeRoomView,RoomOnly(2Adults)\",\r\n\"SupplierNet\":245.4600,\r\n\"SupplierNetLocal\":245.4600,\r\n\"SupplierCommission\":22.9500,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":268.4100,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-09-03T00:00:00\",\r\n\"ClientGross\":269.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.167\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":29705210,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":89690197,\r\n\"ItemTypeId\":441,\r\n\"ItemTypeTitle\":\"PayPalFee\",\r\n\"ItemTypeGroupId\":16,\r\n\"CostType\":\"PaymentFee\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2850,\r\n\"SupplierName\":\"PaypalProvider\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"PayPalFee(0.000%)\",\r\n\"SupplierNet\":0.1300,\r\n\"SupplierNetLocal\":0.1300,\r\n\"SupplierCommission\":-0.1300,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0000,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T00:00:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-07-20T14:54:46.18\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":90101439,\r\n\"ItemTypeId\":441,\r\n\"ItemTypeTitle\":\"PayPalFee\",\r\n\"ItemTypeGroupId\":16,\r\n\"CostType\":\"PaymentFee\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2850,\r\n\"SupplierName\":\"PaypalProvider\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"PayPalFee\",\r\n\"SupplierNet\":3.5684,\r\n\"SupplierNetLocal\":3.5684,\r\n\"SupplierCommission\":-3.5684,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2018-08-27T00:00:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2018-08-12T02:15:21.093\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":272.9500,\r\n\"ClientTotalCost\":272.9500000000000000,\r\n\"TotalMargin\":23.7916,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.0000,\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":0.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":2050,\r\n\"SupplierName\":\"TravelscapeLLC\",\r\n\"BookingInfos\":[]\r\n},\r\n\"Version\":5173907150\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundTrips\":[]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    static testMethod void AsyncDerwentWebServiceBookingTransferItinerary_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\":[\r\n{\r\n\"TripId\":18260000,\r\n\"Bookings\":[\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18260000,\r\n\"Type\":32,\r\n\"BookingRef\":\"TRNtest18260000\",\r\n\"BookedDate\":\"2019-11-28T22:34:40.807\",\r\n\"Status\":2,\r\n\"DomainId\":2,\r\n\"CultureCode\":\"en-ie\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-IE\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"HolidayTaxis:PrivateTransfer-Transfer(ONE-WAY),TenerifeNorth-PlayadelasAmericas\",\r\n\"BookedById\":4469,\r\n\"BookedBy\":\"VenkataSajja\",\r\n\"AgentEmail\":\"vsajja@travelrepublic.co.uk\",\r\n\"ClientCurrencyCode\":\"EUR\",\r\n\"ClientCurrencyExchangeRate\":1.153469,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"eadb0885-51b3-48ea-afdc-3c411e01bd5e\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-11-28T22:34:45.223\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"81d9d44c-3b6d-4471-9f26-8e1bf4cae2a4\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":\"234\",\r\n\"OfficeName\":\"DWT-DubaiMallOutlet\",\r\n\"UtmId\":1181906195020629844,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"FXRTransferATR\",\r\n\"LastName\":\"LXRTransferATR\",\r\n\"AddressLine1\":\"52AKingsgateRoad\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"KingstonuponThames\",\r\n\"County\":\"\",\r\n\"PostCode\":\"KT26NH\",\r\n\"CountryCode\":\"IE\",\r\n\"Email\":\"vsajja@travelrepublic.co.uk\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"2222222222\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Transfers\":[\r\n{\r\n\"ItineraryId\":31939850,\r\n\"Date\":\"2019-12-09T10:10:00\",\r\n\"PickUpPoint\":{\r\n\"EndPointType\":1,\r\n\"AirportCode\":\"TFN\",\r\n\"AirportName\":\"TenerifeNorth\"\r\n},\r\n\"DropOffPoint\":{\r\n\"EndPointType\":5,\r\n\"ResortId\":31126,\r\n\"ResortName\":\"PlayadelasAmericas\"\r\n},\r\n\"TransferTitle\":\"PrivateTransfer\",\r\n\"Address\":\"London,TransfersHotelAddress\",\r\n\"Adults\":2,\r\n\"Children\":1,\r\n\"Infants\":0,\r\n\"OutboundFlight\":{\r\n\"FlightNumber\":\"AB123\",\r\n\"ArrivalDate\":\"2019-12-09T10:10:00\"\r\n},\r\n\"InboundFlight\":null\r\n}\r\n],\r\n\"BookingType\":32\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":41406651,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"FXRTransferATR\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"LXRTransferATR\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":0,\r\n\"TicketNumber\":\"\"\r\n},\r\n{\r\n\"Id\":41406652,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Guest\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Two\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":21,\r\n\"ItineraryId\":0,\r\n\"TicketNumber\":\"\"\r\n},\r\n{\r\n\"Id\":41406653,\r\n\"AgeCategory\":2,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Guest\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Three\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":5,\r\n\"ItineraryId\":0,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":94554864,\r\n\"ItemTypeId\":19,\r\n\"ItemTypeTitle\":\"Transfer\",\r\n\"ItemTypeGroupId\":6,\r\n\"CostType\":\"Transfer\",\r\n\"Quantity\":1,\r\n\"SupplierId\":154,\r\n\"SupplierName\":\"HolidayTaxis\",\r\n\"SupplierRef\":\"TEST_1234\",\r\n\"Title\":\"Transfer(ONE-WAY)-PrivateTransfer\",\r\n\"SupplierNet\":44.4860,\r\n\"SupplierNetLocal\":47.0070,\r\n\"SupplierCommission\":20.9346,\r\n\"SupplierVat\":4.1869,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":76.3100,\r\n\"SupplierCurrency\":\"EUR\",\r\n\"SupplierExchangeRate\":0.857300,\r\n\"SupplierBalanceDue\":\"2020-01-08T00:00:00\",\r\n\"ClientGross\":67.6221,\r\n\"Memo\":\"Totallocalgross:76.31\",\r\n\"CreateDate\":\"2019-11-28T22:34:40.87\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n},\r\n{\r\n\"Id\":94554865,\r\n\"ItemTypeId\":191,\r\n\"ItemTypeTitle\":\"CardFee\",\r\n\"ItemTypeGroupId\":16,\r\n\"CostType\":\"PaymentFee\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2136,\r\n\"SupplierName\":\"WorldPay\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"CreditCardFee(0.000%)\",\r\n\"SupplierNet\":0.4057,\r\n\"SupplierNetLocal\":0.4057,\r\n\"SupplierCommission\":-0.4057,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":0.0,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":1.000000,\r\n\"SupplierBalanceDue\":\"2019-12-09T10:10:00\",\r\n\"ClientGross\":0.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2019-11-28T22:34:40.87\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[\r\n{\r\n\"Title\":\"HolidayTaxisAutoBooking\",\r\n\"Description\":\"QueueBookingforAutoProcessing\",\r\n\"CreatedById\":5,\r\n\"Id\":2166591,\r\n\"CreatedDate\":\"2019-11-28T22:34:41.01\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"StartingAutoBooking\",\r\n\"Description\":null,\r\n\"CreatedById\":5,\r\n\"Id\":2166592,\r\n\"CreatedDate\":\"2019-11-28T22:34:41.713\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":2166593,\r\n\"CreatedDate\":\"2019-11-28T22:34:42.023\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"Audit\",\r\n\"Description\":\"Thebookingprocesscompleted.WARNING-Abookingmaynowexistinthesystem\",\r\n\"CreatedById\":5,\r\n\"Id\":2166594,\r\n\"CreatedDate\":\"2019-11-28T22:34:43.21\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"AutoBookingCompletedSuccessfully<br>~28_11_2019_22_34_41\",\r\n\"Description\":null,\r\n\"CreatedById\":5,\r\n\"Id\":2166595,\r\n\"CreatedDate\":\"2019-11-28T22:34:43.257\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Emailsenttovsajja@travelrepublic.co.uk\",\r\n\"Description\":\"Subject:TravelRepublic-BookingConfirmationandTransferJoiningInstructions-TRNtest18260000(54)<br>Click<ahref=testhttp:testtestpp.travelrepublic.co.uktestClienttestclClientEmail.aspx?Id=914d4fa2-e72b-4674-a33f-0c37a09487catesttarget=test_blanktest>here<testa>toviewtheemail.\",\r\n\"CreatedById\":5,\r\n\"Id\":2166596,\r\n\"CreatedDate\":\"2019-11-28T22:34:45.19\",\r\n\"CreatedBy\":\"RUSH\"\r\n}\r\n],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":67.6221,\r\n\"ClientTotalCost\":77.9999960649000000,\r\n\"TotalMargin\":22.7304,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.0000,\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ClientCurrencyCode\":\"EUR\",\r\n\"ClientExchangeRate\":1.153469,\r\n\"ClientAmountDue\":0.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":154,\r\n\"SupplierName\":\"HolidayTaxis\",\r\n\"BookingInfos\":[\r\n{\r\n\"Id\":1705349,\r\n\"TypeId\":0,\r\n\"Type\":null,\r\n\"Title\":\"OutboundPick-UpInstructions\",\r\n\"Description\":\"TestbookingOutboundDetails\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n}\r\n]\r\n},\r\n\"Version\":5238962696\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundTrips\":[]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceBookingAttractionsItinerary_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\":[\r\n{\r\n\"TripId\":18250669,\r\n\"Bookings\":[\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18250670,\r\n\"Type\":2,\r\n\"BookingRef\":\"OLFtest18250670\",\r\n\"BookedDate\":\"2019-11-12T08:53:44.92\",\r\n\"Status\":1,\r\n\"DomainId\":1,\r\n\"CultureCode\":\"en-gb\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-GB\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"AttractionTickets\",\r\n\"BookedById\":9346,\r\n\"BookedBy\":\"KeithRogers\",\r\n\"AgentEmail\":\"keith.rogers@pwc.com\",\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"bfd7af1e-baf8-4eb5-9845-c1870aafa50d\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-11-12T11:08:15.377\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"e50b450a-215b-4ae4-b01a-34f92d2b6c1a\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":null,\r\n\"OfficeName\":null,\r\n\"UtmId\":871602445111418223,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Chandler\",\r\n\"LastName\":\"Bing\",\r\n\"AddressLine1\":\"TravelRepublicLtdClarendonHouse,147LondonRoad\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"KingstonuponThames\",\r\n\"County\":\"\",\r\n\"PostCode\":\"KT26NH\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"chandlerbingfromfriends123@gmail.com\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"14256374\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Tickets\":[\r\n{\r\n\"ItineraryId\":31925161,\r\n\"Description\":\"GoldenCircleandNorthernLights\",\r\n\"StartDate\":\"2019-12-11T00:00:00\",\r\n\"EndDate\":\"2019-12-12T00:00:00\",\r\n\"Adults\":1,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"Destination\":null\r\n}\r\n],\r\n\"BookingType\":2\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":41383083,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Chandler\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Bing\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":0,\r\n\"ItineraryId\":31925161,\r\n\"TicketNumber\":\"\"\r\n},\r\n{\r\n\"Id\":41383084,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Ross\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Geller\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":0,\r\n\"ItineraryId\":31925161,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":94531758,\r\n\"ItemTypeId\":10,\r\n\"ItemTypeTitle\":\"AdultAttractionTicket\",\r\n\"ItemTypeGroupId\":11,\r\n\"CostType\":\"Attractions\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2004,\r\n\"SupplierName\":\"ReykjavikExcursions-CreditCard\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"GoldenCircleandNorthernLights(Adult)\",\r\n\"SupplierNet\":60.4698,\r\n\"SupplierNetLocal\":69.7500,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":69.7500,\r\n\"SupplierCurrency\":\"EUR\",\r\n\"SupplierExchangeRate\":0.866950,\r\n\"SupplierBalanceDue\":\"2019-11-12T08:53:44.92\",\r\n\"ClientGross\":66.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2019-11-12T08:53:44.983\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":66.0000,\r\n\"ClientTotalCost\":66.0000000000000000,\r\n\"TotalMargin\":5.5302,\r\n\"DueDate\":\"2019-11-12T00:00:00\",\r\n\"AmountDue\":66.0000,\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":66.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":2004,\r\n\"SupplierName\":\"ReykjavikExcursions-CreditCard\",\r\n\"BookingInfos\":[]\r\n},\r\n\"Version\":5235502687\r\n},\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18250669,\r\n\"Type\":2,\r\n\"BookingRef\":\"OLFtest18250669\",\r\n\"BookedDate\":\"2019-11-12T08:53:44.78\",\r\n\"Status\":1,\r\n\"DomainId\":1,\r\n\"CultureCode\":\"en-gb\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-GB\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"AttractionTickets\",\r\n\"BookedById\":9346,\r\n\"BookedBy\":\"KeithRogers\",\r\n\"AgentEmail\":\"keith.rogers@pwc.com\",\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"bfd7af1e-baf8-4eb5-9845-c1870aafa50d\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-11-12T11:08:15.393\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"e50b450a-215b-4ae4-b01a-34f92d2b6c1a\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":null,\r\n\"OfficeName\":null,\r\n\"UtmId\":871602445111418223,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Chandler\",\r\n\"LastName\":\"Bing\",\r\n\"AddressLine1\":\"TravelRepublicLtdClarendonHouse,147LondonRoad\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"KingstonuponThames\",\r\n\"County\":\"\",\r\n\"PostCode\":\"KT26NH\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"chandlerbingfromfriends123@gmail.com\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"14256374\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Tickets\":[\r\n{\r\n\"ItineraryId\":31925160,\r\n\"Description\":\"GoldenCircleandNorthernLights\",\r\n\"StartDate\":\"2019-12-11T00:00:00\",\r\n\"EndDate\":\"2019-12-12T00:00:00\",\r\n\"Adults\":1,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"Destination\":null\r\n}\r\n],\r\n\"BookingType\":2\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":41383081,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Chandler\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Bing\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":0,\r\n\"ItineraryId\":31925160,\r\n\"TicketNumber\":\"\"\r\n},\r\n{\r\n\"Id\":41383082,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Ross\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Geller\",\r\n\"DateOfBirth\":null,\r\n\"AgeOnReturn\":0,\r\n\"ItineraryId\":31925160,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":94531757,\r\n\"ItemTypeId\":10,\r\n\"ItemTypeTitle\":\"AdultAttractionTicket\",\r\n\"ItemTypeGroupId\":11,\r\n\"CostType\":\"Attractions\",\r\n\"Quantity\":1,\r\n\"SupplierId\":2004,\r\n\"SupplierName\":\"ReykjavikExcursions-CreditCard\",\r\n\"SupplierRef\":null,\r\n\"Title\":\"GoldenCircleandNorthernLights(Adult)\",\r\n\"SupplierNet\":60.4698,\r\n\"SupplierNetLocal\":69.7500,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":69.7500,\r\n\"SupplierCurrency\":\"EUR\",\r\n\"SupplierExchangeRate\":0.866950,\r\n\"SupplierBalanceDue\":\"2019-11-12T08:53:44.78\",\r\n\"ClientGross\":66.0000,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2019-11-12T08:53:44.873\",\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[],\r\n\"Csrs\":[\r\n{\r\n\"CsrId\":4528946,\r\n\"CategoryId\":47,\r\n\"Subject\":\"**24**RequestalternateDiscoveryCovedates\",\r\n\"Text\":\"PleasecanIchangeto21stDecember\",\r\n\"Status\":2,\r\n\"TextAlerts\":false,\r\n\"CreatedDate\":\"2019-11-12T10:58:56.307\",\r\n\"PublicAgentName\":\"Nicola\",\r\n\"Public\":true,\r\n\"ResponseRequiredDate\":null,\r\n\"TaskStatusChangedDate\":\"2019-11-12T10:58:56.48\",\r\n\"ResponseRequired\":false,\r\n\"IsTravelChange\":false,\r\n\"Questions\":[],\r\n\"Notes\":[\r\n{\r\n\"Subject\":\"CSRStatusChanged\",\r\n\"Text\":\"StatuschangedfromUnallocatedtoInProgress.\",\r\n\"CreatedDate\":\"2019-11-12T10:58:56.493\",\r\n\"CreatedByCustomer\":false,\r\n\"PublicAgentName\":\"Nicola\",\r\n\"Public\":false\r\n},\r\n{\r\n\"Subject\":\"CSRCreated\",\r\n\"Text\":\"CustomerservicerequestcreatedbyNicolaGarratty.\",\r\n\"CreatedDate\":\"2019-11-12T10:58:56.43\",\r\n\"CreatedByCustomer\":false,\r\n\"PublicAgentName\":\"Nicola\",\r\n\"Public\":false\r\n}\r\n]\r\n}\r\n],\r\n\"Balance\":{\r\n\"TotalCost\":66.0000,\r\n\"ClientTotalCost\":66.0000000000000000,\r\n\"TotalMargin\":5.5302,\r\n\"DueDate\":\"2019-11-12T00:00:00\",\r\n\"AmountDue\":66.0000,\r\n\"AccountingCurrencyCode\":\"GBP\",\r\n\"AccountingExchangeRate\":1.000000,\r\n\"ClientCurrencyCode\":\"GBP\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":66.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":2004,\r\n\"SupplierName\":\"ReykjavikExcursions-CreditCard\",\r\n\"BookingInfos\":[]\r\n},\r\n\"Version\":5235502691\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundTrips\":[]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    
    static testMethod void AsyncDerwentWebServiceBookingCarHireItinerary_Test() {
        try{ Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Booking';
            reqLog.Entity_Id__c = '1138764';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Account acc= new Account(lastname='test_AccountTriggerHelper',Org_Derwent_Customer_No__c='99988333',Website='www.test.test',PersonEmail='test@test.com',PersonMobilePhone='01234567789',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('dTME_B2C Customer - New').getRecordTypeId());
            insert acc;
            String BookingRequest='{\r\n\"Trips\":[\r\n{\r\n\"TripId\":18172960,\r\n\"Bookings\":[\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18172953,\r\n\"Type\":1024,\r\n\"BookingRef\":\"BND18172953\",\r\n\"BookedDate\":\"2019-07-08T08:16:56.453\",\r\n\"Status\":2,\r\n\"DomainId\":66,\r\n\"CultureCode\":\"en-zw\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-ZW\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"Bundle\",\r\n\"BookedById\":8151,\r\n\"BookedBy\":\"AMANSINHA\",\r\n\"AgentEmail\":\"asinha@travelrepublic.co.uk\",\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"3b12271b-96b9-4e09-af8b-5682378bdf35\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-07-08T08:24:05.733\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"bffb3181-eb53-47d4-a0d0-fbf2bb62b5a2\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":null,\r\n\"OfficeName\":null,\r\n\"UtmId\":309416300404129093,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"LastName\":\"Hiretestzzz\",\r\n\"AddressLine1\":\"test\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"Bexleyheath\",\r\n\"County\":\"Bexley\",\r\n\"PostCode\":\"DA75RJ\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"testcar@travelrepublic.co.uk\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"1234564556\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"EndDate\":\"2020-05-05T01:00:00\",\r\n\"BookingType\":1024\r\n},\r\n\"Passengers\":[],\r\n\"LineItems\":[],\r\n\"Notes\":[\r\n{\r\n\"Title\":\"BundleAutoBooking\",\r\n\"Description\":\"QueueBookingforAutoProcessing\",\r\n\"CreatedById\":5,\r\n\"Id\":216105,\r\n\"CreatedDate\":\"2019-07-08T08:16:57.127\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"BundleAutoBooking\",\r\n\"Description\":\"QueueBookingforAutoProcessing\",\r\n\"CreatedById\":5,\r\n\"Id\":216162,\r\n\"CreatedDate\":\"2019-07-08T08:23:30.4\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Emailsenttotestcar@travelrepublic.co.uk\",\r\n\"Description\":\"Subject:EmiratesHolidays-BookingRequest-BND18172953(46)<br>Click<ahref=http:pp.travelrepublic.co.ukClientclClientEmail.aspx?Id=a3d9bf64-7e1f-4de8-b467-e497b58efa42target=_blank>here<a>toviewtheemail.\",\r\n\"CreatedById\":5,\r\n\"Id\":216108,\r\n\"CreatedDate\":\"2019-07-08T08:16:58.093\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216117,\r\n\"CreatedDate\":\"2019-07-08T08:17:08.577\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216123,\r\n\"CreatedDate\":\"2019-07-08T08:17:18.093\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216165,\r\n\"CreatedDate\":\"2019-07-08T08:23:42.677\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"AutoBookingCompletedSuccessfully\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216131,\r\n\"CreatedDate\":\"2019-07-08T08:17:42.167\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"AutoBookingCompletedSuccessfully\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216171,\r\n\"CreatedDate\":\"2019-07-08T08:24:03.223\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Emailsenttotestcar@travelrepublic.co.uk\",\r\n\"Description\":\"Subject:EmiratesHolidaysFinalbookingconfirmation\u2013BND18172953(22)<br>Click<ahref=http:pp.travelrepublic.co.ukClientclClientEmail.aspx?Id=4caf0de0-b9b3-4d16-9133-136bbd8eb20btarget=_blank>here<a>toviewtheemail.<br>Click<ahref=http:pp.travelrepublic.co.ukClientclClientEmail.aspx?Id=4caf0de0-b9b3-4d16-9133-136bbd8eb20b&pdf=1&attachmentId=118540target=_blank>here<a>toviewVoucherAttachment.<br>Click<ahref=http:pp.travelrepublic.co.ukClientclClientEmail.aspx?Id=4caf0de0-b9b3-4d16-9133-136bbd8eb20b&pdf=1&attachmentId=118541target=_blank>here<a>toviewCustomerInvoiceAttachment.\",\r\n\"CreatedById\":5,\r\n\"Id\":216132,\r\n\"CreatedDate\":\"2019-07-08T08:17:45.473\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"Emailsenttotestcar@travelrepublic.co.uk\",\r\n\"Description\":\"Subject:EmiratesHolidaysAmendmentbookingconfirmation\u2013BND18172953(22)<br>Click<ahref=http:pp.travelrepublic.co.ukClientclClientEmail.aspx?Id=a47fd996-b954-4044-a76b-f8d94c98767etarget=_blank>here<a>toviewtheemail.<br>Click<ahref=http:pp.travelrepublic.co.ukClientclClientEmail.aspx?Id=a47fd996-b954-4044-a76b-f8d94c98767e&pdf=1&attachmentId=118544target=_blank>here<a>toviewCustomerInvoiceAttachment.\",\r\n\"CreatedById\":5,\r\n\"Id\":216172,\r\n\"CreatedDate\":\"2019-07-08T08:24:05.72\",\r\n\"CreatedBy\":\"RUSH\"\r\n}\r\n],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":0.0000,\r\n\"ClientTotalCost\":0.0000000000000000,\r\n\"TotalMargin\":0.0000,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.2108,\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":0.2108000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[\r\n{\r\n\"Id\":30851,\r\n\"Title\":\"Agentnoteforpayment32831610\",\r\n\"Description\":\"test\",\r\n\"CreatedById\":8151,\r\n\"CreatedDate\":\"2019-07-08T08:16:56.823\",\r\n\"CreatedBy\":\"AMANSINHA\"\r\n}\r\n],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":2,\r\n\"SupplierName\":\"TravelRepublic\",\r\n\"BookingInfos\":[\r\n{\r\n\"Id\":1414814,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Generic\",\r\n\"Description\":\"\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414861,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Generic\",\r\n\"Description\":\"\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":0\r\n}\r\n]\r\n},\r\n\"Version\":5179350491\r\n},\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18172954,\r\n\"Type\":8,\r\n\"BookingRef\":\"ACM18172954\",\r\n\"BookedDate\":\"2019-07-08T08:16:56.64\",\r\n\"Status\":2,\r\n\"DomainId\":66,\r\n\"CultureCode\":\"en-zw\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-ZW\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"HotelBedsSLU:CitymaxHotelBurDubaiinBurDubaiArea,Dubai(7nights)\",\r\n\"BookedById\":8151,\r\n\"BookedBy\":\"AMANSINHA\",\r\n\"AgentEmail\":\"asinha@travelrepublic.co.uk\",\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"3b12271b-96b9-4e09-af8b-5682378bdf35\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-07-08T08:24:05.767\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"efb9fd87-290e-462a-9cfe-ea57d488c435\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":null,\r\n\"OfficeName\":null,\r\n\"UtmId\":309416300404129093,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"LastName\":\"Hiretestzzz\",\r\n\"AddressLine1\":\"test\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"Bexleyheath\",\r\n\"County\":\"Bexley\",\r\n\"PostCode\":\"DA75RJ\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"testcar@travelrepublic.co.uk\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"1234564556\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"Stays\":[\r\n{\r\n\"CheckIn\":\"2019-07-18T00:00:00\",\r\n\"CheckOut\":\"2019-07-25T00:00:00\",\r\n\"EstabId\":2209667,\r\n\"EstabName\":\"CitymaxHotelBurDubai\",\r\n\"StarRating\":3,\r\n\"Description\":\"CitymaxHotelBurDubaiinBurDubaiArea,Dubai(18Jul2019for7nights)\",\r\n\"Destination\":{\r\n\"Name\":\"BurDubaiArea,Dubai\",\r\n\"Country\":\"UnitedArabEmirates\",\r\n\"Province\":\"Dubai\",\r\n\"Location\":\"BurDubaiArea\"\r\n},\r\n\"Rooms\":[\r\n{\r\n\"ItineraryId\":31799641,\r\n\"RoomType\":\"DOUBLESTANDARD\",\r\n\"BoardType\":\"ROOMONLY\",\r\n\"AdditionalBoardDesc\":\"\",\r\n\"Adults\":2,\r\n\"Children\":0,\r\n\"Infants\":0,\r\n\"SpecialRequests\":\"\"\r\n}\r\n]\r\n}\r\n],\r\n\"BookingType\":8\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":41180714,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Hiretestzzz\",\r\n\"DateOfBirth\":\"1942-02-16T00:00:00\",\r\n\"AgeOnReturn\":77,\r\n\"ItineraryId\":31799641,\r\n\"TicketNumber\":\"\"\r\n},\r\n{\r\n\"Id\":41180715,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Mr\",\r\n\"FirstName\":\"Test\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Carhire\",\r\n\"DateOfBirth\":\"1942-01-09T00:00:00\",\r\n\"AgeOnReturn\":77,\r\n\"ItineraryId\":31799641,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":94347248,\r\n\"ItemTypeId\":17,\r\n\"ItemTypeTitle\":\"Accommodation\",\r\n\"ItemTypeGroupId\":1,\r\n\"CostType\":\"Accommodation\",\r\n\"Quantity\":1,\r\n\"SupplierId\":3630,\r\n\"SupplierName\":\"HotelBedsSLU\",\r\n\"SupplierRef\":\"TestReference_636981706305519468\",\r\n\"Title\":\"DoubleStandard,RoomOnly(2Adults)\",\r\n\"SupplierNet\":110.4018,\r\n\"SupplierNetLocal\":127.7700,\r\n\"SupplierCommission\":0.0000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":127.7700,\r\n\"SupplierCurrency\":\"EUR\",\r\n\"SupplierExchangeRate\":4.097168,\r\n\"SupplierBalanceDue\":\"2019-07-25T00:00:00\",\r\n\"ClientGross\":134.5500,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2019-07-08T08:16:56.69\",\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":31799641,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[\r\n{\r\n\"Title\":\"HotelDescriptionSnapshot\",\r\n\"Description\":\"Click<ahref=\\\"javascript:OpenEstabHistory(2209667,801122)\\\">here<A>forhoteldescriptionatthetimeofbooking.\",\r\n\"CreatedById\":5,\r\n\"Id\":216104,\r\n\"CreatedDate\":\"2019-07-08T08:16:56.69\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"HotelBedsSLUAutoBooking\",\r\n\"Description\":\"QueueBookingforAutoProcessing\",\r\n\"CreatedById\":5,\r\n\"Id\":216106,\r\n\"CreatedDate\":\"2019-07-08T08:16:57.127\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"StartingAutoBooking\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216116,\r\n\"CreatedDate\":\"2019-07-08T08:17:08.28\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216118,\r\n\"CreatedDate\":\"2019-07-08T08:17:08.593\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"Audit\",\r\n\"Description\":\"Thebookingprocesscompleted.WARNING-Abookingmaynowexistinthesystem\",\r\n\"CreatedById\":5,\r\n\"Id\":216120,\r\n\"CreatedDate\":\"2019-07-08T08:17:10.573\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"AutoBookingCompletedSuccessfully<br>~08_07_2019_08_17_08\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216121,\r\n\"CreatedDate\":\"2019-07-08T08:17:10.62\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n}\r\n],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":134.5500,\r\n\"ClientTotalCost\":637.9997715000000000,\r\n\"TotalMargin\":24.1482,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.0000,\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":0.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":3630,\r\n\"SupplierName\":\"HotelBedsSLU\",\r\n\"BookingInfos\":[\r\n{\r\n\"Id\":1414815,\r\n\"TypeId\":2,\r\n\"Type\":\"Cancellationcondition\",\r\n\"Title\":\"CancellationNotice\",\r\n\"Description\":\"<p><b>Room1:DOUBLESTANDARD,ROOMONLY(2Adults)<b><br>From:15-07-2019-GBP18.42-(CurrentR.O.E.:AED87.34)<p>\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414816,\r\n\"TypeId\":10,\r\n\"Type\":\"BookingCondition\",\r\n\"Title\":\"BookingConditions\",\r\n\"Description\":\"Childrenwhoareunder4yearsofagewillbesharingexistingbedwithparents.Hotelwilldirectlychargeguests\\\"TourismDirham\\\"feebyperroompernight.HBislunchordinner,FBislunchanddinner,HBisonlylunchon20141231,child0-4free.Noshowchargesascancellationpolicy,earlydeparturechargesfullstay.DuringRamadanfrom25.05.2017till24.06.2017guestcanselecteitherSuhourorBreakfast.1childrenbetween1to11aresharingbedswithparentsinALLroomtype1childrenbetween1to11aresharingbedswithparentsinALLroomtypeEstimatedtotalamountoftaxes&feesforthisbooking:16.98Europayableonarrival.Childrensharethebedwithparents1.Check-inhour14:00-14:00.Earlydeparture.CarparkYES(withoutadditionaldebitnotes).\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":3630\r\n},\r\n{\r\n\"Id\":1414817,\r\n\"TypeId\":10,\r\n\"Type\":\"BookingCondition\",\r\n\"Title\":\"BookingConditions\",\r\n\"Description\":\"Estimatedtotalamountoftaxes&feesforthisbooking:16.98Europayableonarrival.Childrensharethebedwithparents1.Check-inhour14:00-14:00.Earlydeparture.CarparkYES(withoutadditionaldebitnotes).\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":3630\r\n},\r\n{\r\n\"Id\":1414818,\r\n\"TypeId\":10,\r\n\"Type\":\"BookingCondition\",\r\n\"Title\":\"BookingConditions\",\r\n\"Description\":\"Childrenwhoareunder4yearsofagewillbesharingexistingbedwithparents.Hotelwilldirectlychargeguests\\\"TourismDirham\\\"feebyperroompernight.HBislunchordinner,FBislunchanddinner,HBisonlylunchon20141231,child0-4free.Noshowchargesascancellationpolicy,earlydeparturechargesfullstay.DuringRamadanfrom25.05.2017till24.06.2017guestcanselecteitherSuhourorBreakfast.1childrenbetween1to11aresharingbedswithparentsinALLroomtype1childrenbetween1to11aresharingbedswithparentsinALLroomtypeEstimatedtotalamountoftaxes&feesforthisbooking:16.98Europayableonarrival.Childrensharethebedwithparents1.Check-inhour14:00-14:00.Earlydeparture.CarparkYES(withoutadditionaldebitnotes).Estimatedtotalamountoftaxes&feesforthisbooking:16.98Europayableonarrival.Childrensharethebedwithparents1.Check-inhour14:00-14:00.Earlydeparture.CarparkYES(withoutadditionaldebitnotes).\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":3630\r\n},\r\n{\r\n\"Id\":1414819,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Notice\",\r\n\"Description\":\"UndertheinstructionoftheDubaiGovernment,anewTourismDirhamFee(TDFee)ischargedonallstaysathotelestablishments&mustbepaiduponcheckoutforeachbedroomallocatedforthestay(definedasahotelorhotelapartmentroomthatincludesabedormore).Thisappliesforalltypesofstays,includingpromotionalstayswherefreenightsareavailed.\\r\\n\\r\\nThefeewillbebasedontheclassificationofthehotelestablishment,chargedperoccupiedroompernight;5starhotels&deluxehotelsapartmentsAED20-;4starhotels&superiorhotelapartmentsAED15-;3starhotels&standardhotelapartmentsAED10-.\\r\\n\\r\\nTheTDFeeisaseparatefee&isnotbeincludedintheroomrate.\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414820,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Notice\",\r\n\"Description\":\"Pleasenotethatreligiousholidaysareusually\u2018DryDays\u2019wherealcoholandentertainmentareprohibited.\\r\\nTheexactdatesaresubjecttothesightingofthemoonandthereforetheactualdateissubjecttochangeandmaydifferfromthedatesadvised.\\r\\n\\r\\n2019approximatedatesasfollows:\\r\\n01-Jan-19,03-Apr-19,05-May-19until04-Jun-19,05Jun-19&06-Jun-19,11-Aug-19,12-Aug-19,01-Sep-19,30-Nov-19,10Nov-19,02-Dec-19.\\r\\n\\r\\nExactdatesareusuallyadvisedclosertothedate,butmaynotbeadviseduntilcustomersarriveattheirdestination.\\r\\n\\r\\nPleasealsonotethatsomeexcursionswillnotbeavailableonreligiousdaysandalsopublicholidays,pleaseenquirefordetails.\",\r\n\"ShowOnVoucher\":true,\r\n\"SupplierId\":0\r\n}\r\n]\r\n},\r\n\"Version\":5179350494\r\n},\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18172955,\r\n\"Type\":4,\r\n\"BookingRef\":\"AUT18172955\",\r\n\"BookedDate\":\"2019-07-08T08:16:56.737\",\r\n\"Status\":2,\r\n\"DomainId\":66,\r\n\"CultureCode\":\"en-zw\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-ZW\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"CarHireService:DubaiIntlAirport,Dxb,UnitedArabEmirates(7)\",\r\n\"BookedById\":8151,\r\n\"BookedBy\":\"AMANSINHA\",\r\n\"AgentEmail\":\"asinha@travelrepublic.co.uk\",\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"3b12271b-96b9-4e09-af8b-5682378bdf35\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-07-08T08:24:05.767\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"efb9fd87-290e-462a-9cfe-ea57d488c435\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":null,\r\n\"OfficeName\":null,\r\n\"UtmId\":309416300404129093,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"LastName\":\"Hiretestzzz\",\r\n\"AddressLine1\":\"test\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"Bexleyheath\",\r\n\"County\":\"Bexley\",\r\n\"PostCode\":\"DA75RJ\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"testcar@travelrepublic.co.uk\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"1234564556\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"ItineraryId\":31799642,\r\n\"VendorCode\":\"AV\",\r\n\"VendorName\":\"Avis\",\r\n\"PickUpDate\":\"2020-05-04T01:00:00\",\r\n\"PickUpPointCode\":\"DXBT01::AV\",\r\n\"PickUpPointName\":\"DubaiIntlAirport,Dxb,UnitedArabEmirates\",\r\n\"DropOffDate\":\"2020-05-11T01:00:00\",\r\n\"DropOffPointCode\":\"DXBT01::AV\",\r\n\"DropOffPointName\":\"DubaiIntlAirport,Dxb,UnitedArabEmirates\",\r\n\"CarDescription\":\"Economy4DoorAutomatic(air-con)\",\r\n\"SIPPCode\":\"EDAR\",\r\n\"DoorCount\":4,\r\n\"Model\":\"SuzukiSwiftorsimilar\",\r\n\"ConnectingFlight\":null,\r\n\"BookingType\":4\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":41180716,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Hiretestzzz\",\r\n\"DateOfBirth\":\"1942-02-16T00:00:00\",\r\n\"AgeOnReturn\":78,\r\n\"ItineraryId\":31799642,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":94347249,\r\n\"ItemTypeId\":15,\r\n\"ItemTypeTitle\":\"CarHire\",\r\n\"ItemTypeGroupId\":7,\r\n\"CostType\":\"CarHire\",\r\n\"Quantity\":1,\r\n\"SupplierId\":323,\r\n\"SupplierName\":\"CarHireService\",\r\n\"SupplierRef\":\"11638974GB4\",\r\n\"Title\":\"CarHire\",\r\n\"SupplierNet\":91.9200,\r\n\"SupplierNetLocal\":91.9200,\r\n\"SupplierCommission\":19.5000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":111.4200,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":4.741730,\r\n\"SupplierBalanceDue\":\"2020-06-03T01:00:00\",\r\n\"ClientGross\":111.4192,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2019-07-08T08:16:56.767\",\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[\r\n{\r\n\"Title\":\"CarHireServiceAutoBooking\",\r\n\"Description\":\"QueueBookingforAutoProcessing\",\r\n\"CreatedById\":5,\r\n\"Id\":216107,\r\n\"CreatedDate\":\"2019-07-08T08:16:57.14\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216119,\r\n\"CreatedDate\":\"2019-07-08T08:17:08.593\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216124,\r\n\"CreatedDate\":\"2019-07-08T08:17:18.093\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"StartingAutoBooking\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216122,\r\n\"CreatedDate\":\"2019-07-08T08:17:17.767\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"Audit\",\r\n\"Description\":\"Thebookingprocesscompleted.WARNING-Abookingmaynowexistinthesystem\",\r\n\"CreatedById\":5,\r\n\"Id\":216125,\r\n\"CreatedDate\":\"2019-07-08T08:17:23.757\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Workbacks\",\r\n\"Description\":\"AvisDiscount(Id=60ValueId=1240Duration=1-999Dates=23Jul2018-31Dec2050Amount=17.50%)\",\r\n\"CreatedById\":5,\r\n\"Id\":216126,\r\n\"CreatedDate\":\"2019-07-08T08:17:23.757\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Itemcodeupdate\",\r\n\"Description\":\"Updatingitemcodetoincludetheratecodeandaccountnumber.Olditemcode:Olditemcode:\\\"EDAR;EDAR::AV;4;;\\\".Newitemcode:\\\"EDAR;EDAR::AV;4;U798200;AV873137341731\\\".\",\r\n\"CreatedById\":5,\r\n\"Id\":216127,\r\n\"CreatedDate\":\"2019-07-08T08:17:23.757\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"AutoBookingCompletedSuccessfully<br>~08_07_2019_08_17_17\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216128,\r\n\"CreatedDate\":\"2019-07-08T08:17:23.833\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n}\r\n],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":111.4192,\r\n\"ClientTotalCost\":528.3197632160000000,\r\n\"TotalMargin\":19.4992,\r\n\"DueDate\":null,\r\n\"AmountDue\":0.0000,\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":0.0000000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":323,\r\n\"SupplierName\":\"CarHireService\",\r\n\"BookingInfos\":[\r\n{\r\n\"Id\":1414821,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Inclusions\",\r\n\"Description\":\"UnlimitedMileage,CollisionDamageWaiver,TheftProtection,ThirdPartyLiabilityInsurance,VehicleRegistrationFee,LocalTaxes\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414822,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Exclusions\",\r\n\"Description\":\"YoungSeniorDriverSurcharge,TollCharges,FinesAndViolations,AllAdditionalItems(PaidLocallyAndSubjectToLocalTaxes),PersonalAccidentEffectsProtection\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414823,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"AdditionalDriver\",\r\n\"Description\":\"Additionaldriversmustprovideafullandvaliddrivinglicense,andwillbecharged75.00AEDplustaxperdriverperday.Thisispaidlocallyatthedepot.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414824,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"AgeRequirements\",\r\n\"Description\":\"Minimumageis21yearsoldforgroupsA-E.Forallothercargroupsminimumageis25years.Thereisnomaximumagelimit.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414825,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"ChoosingASuitableCar\",\r\n\"Description\":\"Thecarsizecomparisonsandsuggestedcapacityshownonourwebsiteareforyourguidanceonly.Thenumberofpassengersshowndoesnotnecessarilymeanthatanequivalentnumberofpassengersanditemsofluggagecanbeaccommodatedcomfortably.\\n\\nItistheresponsibilityoftherentertojudgewhetherthereisenoughspaceinthevehicleforallpassengersandtheirluggage.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414826,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"CreditCardPolicies\",\r\n\"Description\":\"WeacceptallmajorCreditCards(MASTER,VISA,JCB,DINERSandAMERICANEXPRESS),AvisChargeCards,AvisVouchersorCorporateLPO(s),asmethodofpayment(s).\\nLocalPurchaseOrders(LPOs)areacceptedfromcompanieswhoarealreadyregisteredlocallywithAvisUAE.\\nWeacceptALLUNIONPAYCREDITCARDs.\\nPleasenotewewillnotacceptprepaid,rechargeorvirtualcreditcards-oranycardsonwhichtherelevantcharactersarenotembossed.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414827,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"DebitCardPolicies\",\r\n\"Description\":\"Debitcardsarenotaccepted.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414828,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Deposit\",\r\n\"Description\":\"Uponpickup,youwillberequiredtoleaveadepositonyourcreditcardtothevalueoftheexcess,whichyouwillberequiredtopayiftherentalvehicleisdamagedduringtheperiodofhire.Theexcesscanbefoundbelow:\\n-Miniandeconomycars:1500AED\\n-Allothercartypes:5000AED\\n\\nYoumusthavesufficientcredittothevalueofthisexcesstoensurethisdepositcanbemadeoryourrentalwillbedeclined.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414829,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Directions\",\r\n\"Description\":\"AFTER-HOURSRETURNS\\n\\nAccepted\\n\\nPark&amp;lockthecar.Placethecompletedcontract&amp;thekeysinthekeydropbox.Remembertotakeyourpersonalbelongingswithyou.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414830,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"DriversLicense\",\r\n\"Description\":\"Alldriversmusthaveavaliddrivinglicenseheldforaminimumofone(1)year.\\nAllnon-UAEresidentswishingtorent,arerequiredtoholdavalidInternationalDrivingLicensealongwith\\ntheirNationalDrivingLicense,exceptdriversholdingdriver&amp;#191;slicensefromthefollowingcountries:\\nGCCcountries-KingdomofSaudiArabia,Qatar,Oman,Bahrain,Kuwait\\nEuropeanCountries-Germany,Italy,Switzerland,Poland,Slovakia,Finland,Spain,Netherlands,\\nGreece,Sweden,Belgium,Ireland,Turkey,Denmark,Portugal,Austria,France,UnitedKingdom,\\nNorway,Romania,Luxemburg,Latvia,Serbia,Lithuania\\nNorthAmericanCountries-UnitedStatesofAmerica,Canada\\nEastAsianCountries-Japan,Australia,Singapore,People&#39;sRepublicofChina,SouthKorea,\\nNewZealand,HongKong\\nAfricaStates-SouthAfrica\\nNotethattheoriginallicenseshouldbefromthesamecountryasthepassportissuingcountry.\\nAllUAEresidentswithanemploymentvisashouldhaveaUAEDrivingLicense.\\nAllUAEpermanentresidentsshouldhaveaUAEDrivingLicense.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414831,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"DrivingRestrictions\",\r\n\"Description\":\"VehiclescannotbedrivenoutsidetheUnitedArabEmirates.\\nVehiclesarenotpermittedtobedrivenintoOman.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414832,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Endorsements\",\r\n\"Description\":\"Pleasecallourreservationsteamifyouhaveanyendorsementsonyourlicence-thesemaypreventyoufromrenting.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414833,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"FuelPolicy\",\r\n\"Description\":\"Yourcarwillbesuppliedwithafulltankoffuelandmustbereturnedfull.Otherfueloptionsmaybeavailablewhencollectingyourcar.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414834,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Insurance\",\r\n\"Description\":\"CollisionDamageWaiver(CDW)-\\nIntheeventofacollisionortheftoftherentalvehicleduringthehire,therenterwillonlybeliablefortheinsuranceexcess.Thisrepresentsarentersmaximumfinancialliability,providedtheyarenotcontraveningthetermsoftherentalagreement.Theexcesscanbefoundbelow:\\n-Miniandeconomycars:1500AED\\n-Allothercartypes:5000AED\\n\\nExclusions-\\nDamagetoorlossoftyres,windscreens,undercarriage,roofandkeysarenotcovered.\\n\\nDrivingonunpavedroadswillvoidtheinsuranceandtherenterwillberesponsibleforthetotalcostofanyrepairsuptoandincludingthefullvalueofthevehicle.\\n\\nExcessReductionWaiver-\\nItispossibletoeliminatetheamountofinsuranceexcesstozerobypurchasingAvis\u2019SuperCoverproductwhencollectingtherentalvehiclefromthedepot.Thisischargedatthefollowing-\\n-Miniandeconomyvehicles:35AEDplustaxperday.\\n-Allothervehicletypes:40AEDplustaxperday.\\n\\nExcessreductionproductscannotbeaddedtotherentaloncetherentalhascommencedandthevehiclehasmoved.\\n\\nPleasenote:AvisreservetherighttoamendthecostoftheSuperCoverproductatanytime.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414835,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"RentalRequirements\",\r\n\"Description\":\"Inordertocollectyourrentalcar,itisessentialtopresentthefollowingitems.\\n\\n1.Afullandvaliddrivinglicenceheldforaminimumof12months.Faxedorphotocopiedlicenceswillnotbeaccepted.\\n\\noUKLicenceHolders:Youwillneedtoproduceyourphotocardlicenceandaone-timepasscodethatcanbeobtainedfromwww.gov.ukview-driving-licence.Inordertoobtainthiscode,youwillneedtosubmityourDrivingLicencenumber,NationalInsurancenumberandpostcode.Thispasscodeisvalidfor21daysfromthepointitisgeneratedandmustbepresentedandstillvalidwhencollectingyourvehicle.Ifyouhaveanold-stylepaperlicence,thiscodeisnotrequired.\\n\\noNon-UKLicenceHolders:IfyourdrivinglicenceisnotwrittenintheRomanAlphabet,youwillalsoneedanInternationalDrivingLicence(IDP).ThisisatranslationofyourlicenceintotheRomanAlphabet,andcanbeobtainedfromyourlocalPostOfficeatanominalcharge.\\n\\noALLLICENCEHOLDERSMUSTPRESENTANINTERNATIONALDRIVINGLICENCE.\\n\\n2.Avalidcreditcard*,inthedriver\u2019sname,withsufficientfundstocoverthevehiclesexcess.\\n\\n3.Carrentalvoucher\\n\\nNOrefundswillbemadeinrespectofunusedrentaldaysorrentalsrejectedduetononeproductionofafullandvaliddrivinglicence,validcreditcardorcarhirerentalvoucher.\\n\\n*A2ndcreditcardandavalidpassportmustalsobepresentedwhenhiringLargeMercedes,PrestigeandSportscars.Thisincludesanylocalupgradestothesecartypes.\\n\\nInsomeareasthroughwhichyoumaytravel,itmaybealegalrequirementforchildrentobeseatedinanappropriatechildsafetyseatandorforsnow-chainstobecarried.Achargemayapplyforthehireofsuchitemsandwhereitemscanbepurchasedviathiswebsite,ourchargesaredetailed.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414836,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"SpecialEquipmentNotes\",\r\n\"Description\":\"Additionalextrasshouldberequestedatthetimeofbooking,andpaidforattimeofcollection.Pleasenotethatwecannotguaranteetheiravailabilityandpricesarecontrolledbythecarhiresuppliersomaybesubjecttochange.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414837,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"SpecialEquipment\",\r\n\"Description\":\"AdditionalDriver\\nAED75.00chargedforeachadditionaldriverperrental.Theadditionaldriver&#39;soriginalpassportandvaliddrivinglicensemustbepresentedatAVIS.\\n\\nAvisGPS\\n50UAEDirhamperday.Maximumof450UAEDirhamperrental.GPSaresubjecttoavailabilityatallAVISofficesatanadditionalcostofAED50.00perday,AED250.00perweekandAED450.00permonth.Advancenotificationof72hoursisrequired\\n\\nBabySeat\\n30UAEDirhamperday.Maximumof300UAEDirhamperrental.\\n\\nChildSeat\\n30UAEDirhamperday.Maximumof300UAEDirhamperrental.WehavearangeofchildseatstofitdifferentagesandheightsatadditionalcoastofAED30.00perday,AED75.00perweekanduptomaximumofAED300.00.TheBabyChildseatsaresubjecttoavailabilityatallAVISrentaloffices.Advancenotificationof72hoursisrequired.\\n\\n\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414838,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"UsefulInformation\",\r\n\"Description\":\"Collection:AtthetimeofcollectiontherenterisrequiredtosignarentalagreementwiththelocalCarHireCompany.Bysigning,therenteracceptsthetermsandconditionsoftheCarHireCompany.Pleaseensurethatyoureadtherentalagreementbeforesigning,asthisisalegallybindingdocument.\\n\\nOtherInformation:PleaseensurethatyoureadandunderstandthefullRentalConditions,payingspecialattentiontotheinsuranceexcess,depositinformation,fuelpolicies,localchargesandanyageordrivingrelatedrestrictions.Whenyouarriveatthepickuplocation,youmaybeofferedadditionalproducts.Theseproductswillbeoptionalextras,andarenotnecessarytopickupyourvehicle.\\n\\nAnyextensiontothepreagreedrentaldurationissubjecttoavailability,willcarryalocalchargeandwillbeclassedasaseparaterental.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414839,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"YoungDriversSurcharge\",\r\n\"Description\":\"Youngdriversbetween21-23yearsoldaresubjecttothefeeof10AEDperday,maximumAED100permonth.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414840,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"termsAndConditionsUrl\",\r\n\"Description\":\"http:qa.carterms.services.netflights.localrentalConditions.ashx?puDepot=DXBT01&amp;puDate=04-05-2020+01%3a00&amp;doDate=11-05-2020+01%3a00&amp;provider=AV&amp;sipp=EDAR&amp;abta=V6805&amp;company=DWEKD&amp;plan=S\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414841,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"YourPersonalDetails\",\r\n\"Description\":\"Thepersonalinformationyougiveusisusedtoprocessourbookingwithourcarrentalpartnersandtoprovideyouwithyourrentalvoucher.E-mailandmobilephonedetailswillnotbepassedtoanythirdpartiesorusedforotherpurposeswithoutyourpriorknowledge.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n}\r\n]\r\n},\r\n\"Version\":5179350497\r\n},\r\n{\r\n\"BookingCore\":{\r\n\"Id\":18172960,\r\n\"Type\":4,\r\n\"BookingRef\":\"AUT18172960\",\r\n\"BookedDate\":\"2019-07-08T08:23:30.163\",\r\n\"Status\":2,\r\n\"DomainId\":66,\r\n\"CultureCode\":\"en-zw\",\r\n\"PackageId\":null,\r\n\"BookingLanguage\":\"en-ZW\"\r\n},\r\n\"BookingDetail\":{\r\n\"Title\":\"CarHireService:DubaiIntlAirport,Dxb,UnitedArabEmirates(7)\",\r\n\"BookedById\":8151,\r\n\"BookedBy\":\"AMANSINHA\",\r\n\"AgentEmail\":\"asinha@travelrepublic.co.uk\",\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientCurrencyExchangeRate\":1.000000,\r\n\"SpecialRequests\":\"\",\r\n\"UserId\":\"3b12271b-96b9-4e09-af8b-5682378bdf35\",\r\n\"TravelAgencyId\":0,\r\n\"LastModified\":\"2019-07-08T08:24:05.78\",\r\n\"ApplicationType\":1,\r\n\"FamilyId\":\"bffb3181-eb53-47d4-a0d0-fbf2bb62b5a2\",\r\n\"CustomMetadata\":null,\r\n\"OfficeNo\":null,\r\n\"OfficeName\":null,\r\n\"UtmId\":309416300404129093,\r\n\"BookingCallback\":false\r\n},\r\n\"LeadContact\":{\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"LastName\":\"Hiretestzzz\",\r\n\"AddressLine1\":\"test\",\r\n\"AddressLine2\":\"\",\r\n\"AddressLine3\":\"\",\r\n\"AddressLine4\":\"Bexleyheath\",\r\n\"County\":\"Bexley\",\r\n\"PostCode\":\"DA75RJ\",\r\n\"CountryCode\":\"GB\",\r\n\"Email\":\"testcar@travelrepublic.co.uk\",\r\n\"PhoneHome\":\"\",\r\n\"PhoneMobile\":\"1234564556\",\r\n\"PhoneWork\":\"\",\r\n\"AllowTexts\":false\r\n},\r\n\"CancellationDetails\":{\r\n\"CancellationRequested\":false,\r\n\"Requested\":null,\r\n\"Confirmed\":null\r\n},\r\n\"Itinerary\":{\r\n\"ItineraryId\":31799648,\r\n\"VendorCode\":\"AV\",\r\n\"VendorName\":\"Avis\",\r\n\"PickUpDate\":\"2020-05-05T01:00:00\",\r\n\"PickUpPointCode\":\"DXBT01::AV\",\r\n\"PickUpPointName\":\"DubaiIntlAirport,Dxb,UnitedArabEmirates\",\r\n\"DropOffDate\":\"2020-05-12T01:00:00\",\r\n\"DropOffPointCode\":\"DXBT01::AV\",\r\n\"DropOffPointName\":\"DubaiIntlAirport,Dxb,UnitedArabEmirates\",\r\n\"CarDescription\":\"Economy4DoorAutomatic(air-con)\",\r\n\"SIPPCode\":\"EDAR\",\r\n\"DoorCount\":4,\r\n\"Model\":\"SuzukiSwiftorsimilar\",\r\n\"ConnectingFlight\":null,\r\n\"BookingType\":4\r\n},\r\n\"Passengers\":[\r\n{\r\n\"Id\":41180725,\r\n\"AgeCategory\":1,\r\n\"Title\":\"Ms\",\r\n\"FirstName\":\"Car\",\r\n\"MiddleName\":null,\r\n\"SurName\":\"Hiretestzzz\",\r\n\"DateOfBirth\":\"1942-02-16T00:00:00\",\r\n\"AgeOnReturn\":78,\r\n\"ItineraryId\":31799648,\r\n\"TicketNumber\":\"\"\r\n}\r\n],\r\n\"LineItems\":[\r\n{\r\n\"Id\":94347257,\r\n\"ItemTypeId\":15,\r\n\"ItemTypeTitle\":\"CarHire\",\r\n\"ItemTypeGroupId\":7,\r\n\"CostType\":\"CarHire\",\r\n\"Quantity\":1,\r\n\"SupplierId\":323,\r\n\"SupplierName\":\"CarHireService\",\r\n\"SupplierRef\":\"11639496GB1\",\r\n\"Title\":\"CarHire\",\r\n\"SupplierNet\":91.9200,\r\n\"SupplierNetLocal\":91.9200,\r\n\"SupplierCommission\":19.5000,\r\n\"SupplierVat\":0.0000,\r\n\"SalesTax\":0.0000,\r\n\"SupplierGross\":111.4200,\r\n\"SupplierCurrency\":\"GBP\",\r\n\"SupplierExchangeRate\":4.741730,\r\n\"SupplierBalanceDue\":\"2020-06-04T01:00:00\",\r\n\"ClientGross\":111.4192,\r\n\"Memo\":null,\r\n\"CreateDate\":\"2019-07-08T08:23:30.21\",\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ReverseBookedItemId\":0,\r\n\"LinkedNonSystemBookedItemId\":null,\r\n\"ItineraryId\":0,\r\n\"NonSystem\":false,\r\n\"OptionalExtraType\":null,\r\n\"HiddenFromCustomer\":false,\r\n\"IsPriceHidden\":false,\r\n\"UpsellAmount\":0.0,\r\n\"RebateAmount\":0.0\r\n}\r\n],\r\n\"Notes\":[\r\n{\r\n\"Title\":\"CarHireServiceAutoBooking\",\r\n\"Description\":\"QueueBookingforAutoProcessing\",\r\n\"CreatedById\":5,\r\n\"Id\":216163,\r\n\"CreatedDate\":\"2019-07-08T08:23:30.413\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"StartingAutoBooking\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216164,\r\n\"CreatedDate\":\"2019-07-08T08:23:42.24\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"ClearedSecuritycheck\",\r\n\"Description\":\"Bookingsecuritycheckpassed\",\r\n\"CreatedById\":5,\r\n\"Id\":216166,\r\n\"CreatedDate\":\"2019-07-08T08:23:42.69\",\r\n\"CreatedBy\":\"RUSH\"\r\n},\r\n{\r\n\"Title\":\"Audit\",\r\n\"Description\":\"Thebookingprocesscompleted.WARNING-Abookingmaynowexistinthesystem\",\r\n\"CreatedById\":5,\r\n\"Id\":216167,\r\n\"CreatedDate\":\"2019-07-08T08:23:47.81\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Workbacks\",\r\n\"Description\":\"AvisDiscount(Id=60ValueId=1240Duration=1-999Dates=23Jul2018-31Dec2050Amount=17.50%)\",\r\n\"CreatedById\":5,\r\n\"Id\":216168,\r\n\"CreatedDate\":\"2019-07-08T08:23:47.81\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"Itemcodeupdate\",\r\n\"Description\":\"Updatingitemcodetoincludetheratecodeandaccountnumber.Olditemcode:Olditemcode:\\\"EDAR;EDAR::AV;4;;\\\".Newitemcode:\\\"EDAR;EDAR::AV;4;U798200;AV873137341731\\\".\",\r\n\"CreatedById\":5,\r\n\"Id\":216169,\r\n\"CreatedDate\":\"2019-07-08T08:23:47.81\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n},\r\n{\r\n\"Title\":\"AutoBookingCompletedSuccessfully<br>~08_07_2019_08_23_42\",\r\n\"Description\":\"\",\r\n\"CreatedById\":5,\r\n\"Id\":216170,\r\n\"CreatedDate\":\"2019-07-08T08:23:47.87\",\r\n\"CreatedBy\":\"SYSTEM\"\r\n}\r\n],\r\n\"Csrs\":[],\r\n\"Balance\":{\r\n\"TotalCost\":111.4192,\r\n\"ClientTotalCost\":528.3197632160000000,\r\n\"TotalMargin\":19.4992,\r\n\"DueDate\":\"2019-07-08T00:00:00\",\r\n\"AmountDue\":111.2083,\r\n\"AccountingCurrencyCode\":\"AED\",\r\n\"AccountingExchangeRate\":4.741730,\r\n\"ClientCurrencyCode\":\"AED\",\r\n\"ClientExchangeRate\":1.000000,\r\n\"ClientAmountDue\":111.2083000000\r\n},\r\n\"TicketInfo\":{\r\n\"TicketsSent\":null,\r\n\"TodText\":\"\",\r\n\"ETickets\":false\r\n},\r\n\"TrackingTag\":null,\r\n\"AgentNotes\":[],\r\n\"SupplierInfo\":{\r\n\"SupplierId\":323,\r\n\"SupplierName\":\"CarHireService\",\r\n\"BookingInfos\":[\r\n{\r\n\"Id\":1414862,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Inclusions\",\r\n\"Description\":\"UnlimitedMileage,CollisionDamageWaiver,TheftProtection,ThirdPartyLiabilityInsurance,VehicleRegistrationFee,LocalTaxes\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414863,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Exclusions\",\r\n\"Description\":\"YoungSeniorDriverSurcharge,TollCharges,FinesAndViolations,AllAdditionalItems(PaidLocallyAndSubjectToLocalTaxes),PersonalAccidentEffectsProtection\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414864,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"AdditionalDriver\",\r\n\"Description\":\"Additionaldriversmustprovideafullandvaliddrivinglicense,andwillbecharged75.00AEDplustaxperdriverperday.Thisispaidlocallyatthedepot.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414865,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"AgeRequirements\",\r\n\"Description\":\"Minimumageis21yearsoldforgroupsA-E.Forallothercargroupsminimumageis25years.Thereisnomaximumagelimit.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414866,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"ChoosingASuitableCar\",\r\n\"Description\":\"Thecarsizecomparisonsandsuggestedcapacityshownonourwebsiteareforyourguidanceonly.Thenumberofpassengersshowndoesnotnecessarilymeanthatanequivalentnumberofpassengersanditemsofluggagecanbeaccommodatedcomfortably.\\n\\nItistheresponsibilityoftherentertojudgewhetherthereisenoughspaceinthevehicleforallpassengersandtheirluggage.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414867,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"CreditCardPolicies\",\r\n\"Description\":\"WeacceptallmajorCreditCards(MASTER,VISA,JCB,DINERSandAMERICANEXPRESS),AvisChargeCards,AvisVouchersorCorporateLPO(s),asmethodofpayment(s).\\nLocalPurchaseOrders(LPOs)areacceptedfromcompanieswhoarealreadyregisteredlocallywithAvisUAE.\\nWeacceptALLUNIONPAYCREDITCARDs.\\nPleasenotewewillnotacceptprepaid,rechargeorvirtualcreditcards-oranycardsonwhichtherelevantcharactersarenotembossed.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414868,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"DebitCardPolicies\",\r\n\"Description\":\"Debitcardsarenotaccepted.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414869,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Deposit\",\r\n\"Description\":\"Uponpickup,youwillberequiredtoleaveadepositonyourcreditcardtothevalueoftheexcess,whichyouwillberequiredtopayiftherentalvehicleisdamagedduringtheperiodofhire.Theexcesscanbefoundbelow:\\n-Miniandeconomycars:1500AED\\n-Allothercartypes:5000AED\\n\\nYoumusthavesufficientcredittothevalueofthisexcesstoensurethisdepositcanbemadeoryourrentalwillbedeclined.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414870,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Directions\",\r\n\"Description\":\"AFTER-HOURSRETURNS\\n\\nAccepted\\n\\nPark&amp;lockthecar.Placethecompletedcontract&amp;thekeysinthekeydropbox.Remembertotakeyourpersonalbelongingswithyou.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414871,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"DriversLicense\",\r\n\"Description\":\"Alldriversmusthaveavaliddrivinglicenseheldforaminimumofone(1)year.\\nAllnon-UAEresidentswishingtorent,arerequiredtoholdavalidInternationalDrivingLicensealongwith\\ntheirNationalDrivingLicense,exceptdriversholdingdriver&amp;#191;slicensefromthefollowingcountries:\\nGCCcountries-KingdomofSaudiArabia,Qatar,Oman,Bahrain,Kuwait\\nEuropeanCountries-Germany,Italy,Switzerland,Poland,Slovakia,Finland,Spain,Netherlands,\\nGreece,Sweden,Belgium,Ireland,Turkey,Denmark,Portugal,Austria,France,UnitedKingdom,\\nNorway,Romania,Luxemburg,Latvia,Serbia,Lithuania\\nNorthAmericanCountries-UnitedStatesofAmerica,Canada\\nEastAsianCountries-Japan,Australia,Singapore,People&#39;sRepublicofChina,SouthKorea,\\nNewZealand,HongKong\\nAfricaStates-SouthAfrica\\nNotethattheoriginallicenseshouldbefromthesamecountryasthepassportissuingcountry.\\nAllUAEresidentswithanemploymentvisashouldhaveaUAEDrivingLicense.\\nAllUAEpermanentresidentsshouldhaveaUAEDrivingLicense.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414872,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"DrivingRestrictions\",\r\n\"Description\":\"VehiclescannotbedrivenoutsidetheUnitedArabEmirates.\\nVehiclesarenotpermittedtobedrivenintoOman.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414873,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Endorsements\",\r\n\"Description\":\"Pleasecallourreservationsteamifyouhaveanyendorsementsonyourlicence-thesemaypreventyoufromrenting.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414874,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"FuelPolicy\",\r\n\"Description\":\"Yourcarwillbesuppliedwithafulltankoffuelandmustbereturnedfull.Otherfueloptionsmaybeavailablewhencollectingyourcar.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414875,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"Insurance\",\r\n\"Description\":\"CollisionDamageWaiver(CDW)-\\nIntheeventofacollisionortheftoftherentalvehicleduringthehire,therenterwillonlybeliablefortheinsuranceexcess.Thisrepresentsarentersmaximumfinancialliability,providedtheyarenotcontraveningthetermsoftherentalagreement.Theexcesscanbefoundbelow:\\n-Miniandeconomycars:1500AED\\n-Allothercartypes:5000AED\\n\\nExclusions-\\nDamagetoorlossoftyres,windscreens,undercarriage,roofandkeysarenotcovered.\\n\\nDrivingonunpavedroadswillvoidtheinsuranceandtherenterwillberesponsibleforthetotalcostofanyrepairsuptoandincludingthefullvalueofthevehicle.\\n\\nExcessReductionWaiver-\\nItispossibletoeliminatetheamountofinsuranceexcesstozerobypurchasingAvis\u2019SuperCoverproductwhencollectingtherentalvehiclefromthedepot.Thisischargedatthefollowing-\\n-Miniandeconomyvehicles:35AEDplustaxperday.\\n-Allothervehicletypes:40AEDplustaxperday.\\n\\nExcessreductionproductscannotbeaddedtotherentaloncetherentalhascommencedandthevehiclehasmoved.\\n\\nPleasenote:AvisreservetherighttoamendthecostoftheSuperCoverproductatanytime.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414876,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"RentalRequirements\",\r\n\"Description\":\"Inordertocollectyourrentalcar,itisessentialtopresentthefollowingitems.\\n\\n1.Afullandvaliddrivinglicenceheldforaminimumof12months.Faxedorphotocopiedlicenceswillnotbeaccepted.\\n\\noUKLicenceHolders:Youwillneedtoproduceyourphotocardlicenceandaone-timepasscodethatcanbeobtainedfromwww.gov.ukview-driving-licence.Inordertoobtainthiscode,youwillneedtosubmityourDrivingLicencenumber,NationalInsurancenumberandpostcode.Thispasscodeisvalidfor21daysfromthepointitisgeneratedandmustbepresentedandstillvalidwhencollectingyourvehicle.Ifyouhaveanold-stylepaperlicence,thiscodeisnotrequired.\\n\\noNon-UKLicenceHolders:IfyourdrivinglicenceisnotwrittenintheRomanAlphabet,youwillalsoneedanInternationalDrivingLicence(IDP).ThisisatranslationofyourlicenceintotheRomanAlphabet,andcanbeobtainedfromyourlocalPostOfficeatanominalcharge.\\n\\noALLLICENCEHOLDERSMUSTPRESENTANINTERNATIONALDRIVINGLICENCE.\\n\\n2.Avalidcreditcard*,inthedriver\u2019sname,withsufficientfundstocoverthevehiclesexcess.\\n\\n3.Carrentalvoucher\\n\\nNOrefundswillbemadeinrespectofunusedrentaldaysorrentalsrejectedduetononeproductionofafullandvaliddrivinglicence,validcreditcardorcarhirerentalvoucher.\\n\\n*A2ndcreditcardandavalidpassportmustalsobepresentedwhenhiringLargeMercedes,PrestigeandSportscars.Thisincludesanylocalupgradestothesecartypes.\\n\\nInsomeareasthroughwhichyoumaytravel,itmaybealegalrequirementforchildrentobeseatedinanappropriatechildsafetyseatandorforsnow-chainstobecarried.Achargemayapplyforthehireofsuchitemsandwhereitemscanbepurchasedviathiswebsite,ourchargesaredetailed.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414877,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"SpecialEquipmentNotes\",\r\n\"Description\":\"Additionalextrasshouldberequestedatthetimeofbooking,andpaidforattimeofcollection.Pleasenotethatwecannotguaranteetheiravailabilityandpricesarecontrolledbythecarhiresuppliersomaybesubjecttochange.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414878,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"SpecialEquipment\",\r\n\"Description\":\"AdditionalDriver\\nAED75.00chargedforeachadditionaldriverperrental.Theadditionaldriver&#39;soriginalpassportandvaliddrivinglicensemustbepresentedatAVIS.\\n\\nAvisGPS\\n50UAEDirhamperday.Maximumof450UAEDirhamperrental.GPSaresubjecttoavailabilityatallAVISofficesatanadditionalcostofAED50.00perday,AED250.00perweekandAED450.00permonth.Advancenotificationof72hoursisrequired\\n\\nBabySeat\\n30UAEDirhamperday.Maximumof300UAEDirhamperrental.\\n\\nChildSeat\\n30UAEDirhamperday.Maximumof300UAEDirhamperrental.WehavearangeofchildseatstofitdifferentagesandheightsatadditionalcoastofAED30.00perday,AED75.00perweekanduptomaximumofAED300.00.TheBabyChildseatsaresubjecttoavailabilityatallAVISrentaloffices.Advancenotificationof72hoursisrequired.\\n\\n\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414879,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"UsefulInformation\",\r\n\"Description\":\"Collection:AtthetimeofcollectiontherenterisrequiredtosignarentalagreementwiththelocalCarHireCompany.Bysigning,therenteracceptsthetermsandconditionsoftheCarHireCompany.Pleaseensurethatyoureadtherentalagreementbeforesigning,asthisisalegallybindingdocument.\\n\\nOtherInformation:PleaseensurethatyoureadandunderstandthefullRentalConditions,payingspecialattentiontotheinsuranceexcess,depositinformation,fuelpolicies,localchargesandanyageordrivingrelatedrestrictions.Whenyouarriveatthepickuplocation,youmaybeofferedadditionalproducts.Theseproductswillbeoptionalextras,andarenotnecessarytopickupyourvehicle.\\n\\nAnyextensiontothepreagreedrentaldurationissubjecttoavailability,willcarryalocalchargeandwillbeclassedasaseparaterental.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414880,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"YoungDriversSurcharge\",\r\n\"Description\":\"Youngdriversbetween21-23yearsoldaresubjecttothefeeof10AEDperday,maximumAED100permonth.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414881,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"termsAndConditionsUrl\",\r\n\"Description\":\"http:qa.carterms.services.netflights.localrentalConditions.ashx?puDepot=DXBT01&amp;puDate=05-05-2020+01%3a00&amp;doDate=12-05-2020+01%3a00&amp;provider=AV&amp;sipp=EDAR&amp;abta=V6805&amp;company=DWEKD&amp;plan=S\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n},\r\n{\r\n\"Id\":1414882,\r\n\"TypeId\":1,\r\n\"Type\":\"Generic\",\r\n\"Title\":\"YourPersonalDetails\",\r\n\"Description\":\"Thepersonalinformationyougiveusisusedtoprocessourbookingwithourcarrentalpartnersandtoprovideyouwithyourrentalvoucher.E-mailandmobilephonedetailswillnotbepassedtoanythirdpartiesorusedforotherpurposeswithoutyourpriorknowledge.\",\r\n\"ShowOnVoucher\":false,\r\n\"SupplierId\":0\r\n}\r\n]\r\n},\r\n\"Version\":5179350500\r\n}\r\n]\r\n}\r\n],\r\n\"NotFoundTrips\":[]\r\n}';
            
            AsyncDerwentWebService.parseGetBookingResponse(BookingRequest,new List<id>{reqLog.id});
           }catch(Exception ex){
           }
        
        
    }
    
    static testMethod void AsyncDerwentWebServiceAccount_Test() {
        try{
            Account acc1= new Account(Org_Brand__c='ekh',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',Customer_Domain__c='United Kingdom',PersonMobilePhone='01234567782',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('EKH B2C Customer - New').getRecordTypeId()); //v2.0
            
            insert acc1;
            //AsyncDerwentWebService.getValuesInQuotes(new List<Integer>{1,2});
            string cusResponse='{\r\n  \"CustomerId\": \"89f0f97a-7499-47b8-914d-9b\",\r\n  \"Status\": \"Success\"\r\n}';
            AsyncDerwentWebService.parseCustCreateResponse(cusResponse,new List<id>{acc1.id},200);
        }
        
        catch(Exception ex){
        }
        
    }
    static testMethod void AsyncDerwentWebServiceCSR_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '32751';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='ekh',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('EKH B2C Customer - New').getRecordTypeId()); //v2.0
            
            insert acc1;
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
            
            test.startTest();
                Test.setMock(HttpCalloutMock.class, new DerwentChangeDetectorApiMockCalloutTest());
                AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            test.stopTest();

            AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 32751,\r\n\"BookingId\":666666,\r\n\"CategoryId\": 0,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetCSRResponse(CSRRequest,new List<id>{reqLog.id});
        }
        
        catch(Exception ex){
        }
    }
    
    static testMethod void AsyncDerwentWebServiceTRPCSR_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '1113333';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='trp',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            
            insert acc1;
            String brand = 'trp';
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
            AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 32751,\r\n\"BookingId\":666666,\r\n\"CategoryId\": 42,\r\n\"Subject\": \"string\",\r\n\"IsPublic\": true,\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": false,\r\n\"IsPublic\": true,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n},\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": true,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetServiceRequestResponse(CSRRequest,new List<id>{reqLog.id},brand);
        }
        
        catch(Exception ex){
        }
    }
     static testMethod void AsyncDerwentWebServiceTRPCSR_Test1() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '1113333';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='trp',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            
            insert acc1;
            String brand = 'trp';
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
            AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 32751,\r\n\"BookingId\":666666,\r\n\"CategoryId\": 42,\r\n\"Subject\": \"string\",\r\n\"IsPublic\": false,\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": false,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n},\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": true,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetServiceRequestResponse(CSRRequest,new List<id>{reqLog.id},brand);
        }
        
        catch(Exception ex){
        }
    }
    
    
    static testMethod void AsyncDerwentWebServiceTRPCSR_Test3() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '1113333';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='trp',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            
            insert acc1;
            String brand = 'trp';
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
            AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            
            Case cs = new Case();
            cs.Derwent_CSR_Id__c = '32751';           
            cs.Description = 'test';
            insert cs;
            
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": \"32751\",\r\n\"BookingId\":666666,\r\n\"CategoryId\": 42,\r\n\"Subject\": \"string\",\r\n\"IsPublic\": false,\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": false,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n},\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": true,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetServiceRequestResponse(CSRRequest,new List<id>{reqLog.id},brand);
        }
        
        catch(Exception ex){
        }
    }
    
     static testMethod void AsyncDerwentWebServiceTRPCSR_Test4() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '1113333';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='trp',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            
            insert acc1;
            String brand = 'trp';
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
            AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            
            Case cs = new Case();
            cs.Derwent_CSR_Id__c = '32751';   
            cs.Description = 'test';
            insert cs;
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 32751,\r\n\"BookingId\":666666,\r\n\"CategoryId\": 42,\r\n\"Subject\": \"string\",\r\n\"IsPublic\": true,\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": false,\r\n\"IsPublic\": true,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n},\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": true,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetServiceRequestResponse(CSRRequest,new List<id>{reqLog.id},brand);
        }
        
        catch(Exception ex){
        }
    }
    
     static testMethod void AsyncDerwentWebServiceTRPCSR_Test2() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '11133';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='trp',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('TRP_B2C Customer - New').getRecordTypeId());
            
            insert acc1;
            String brand = 'trp';
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
             //AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            Case cs = new Case();
            cs.Derwent_CSR_Id__c = '32751';
            cs.Description = 'test';
            insert cs;
           
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 32751,\r\n\"BookingId\":666666,\r\n\"CategoryId\": 42,\r\n\"Subject\": \"string\",\r\n\"IsPublic\": false,\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": false,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n},\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"SystemGenerated\": true,\r\n\"IsPublic\": false,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetServiceRequestResponse(CSRRequest,new List<id>{reqLog.id},brand);
        }
        
        catch(Exception ex){
            system.debug('Exception >>>>'+ex);
        }
    }
    
    static testMethod void AsyncDerwentWebServiceServiceRequest_Test() {
        try{
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Csr';
            reqLog.Entity_Id__c = '1113333';
            reqLog.Status__c = 'New';
            insert reqLog;
            Account acc1= new Account(Org_Brand__c='ekh',lastname='test_AccountTriggerHelper1',Website='www.test.test',PersonEmail='test34343@test.com',PersonMobilePhone='01234567782',Customer_Domain__c='United Kingdom',recordtypeId=Schema.SObjectType.Account.getRecordTypeInfosByName().get('EKH B2C Customer - New').getRecordTypeId()); //v2.0
            
            insert acc1;	
            Booking__c bookHead=TestDataFactory.createActiveBookingHeader(acc1.id);
            insert bookHead;
            Booking__c booking= TestDataFactory.createActiveBooking(acc1.id,bookHead.id);
            booking.Booking_ID__c ='666666';
            insert booking;
            AsyncDerwentWebService.getCSR(new List<id>{reqLog.id});
            String CSRRequest='{\r\n\"Csrs\": [\r\n{\r\n\"CsrId\": 32751,\r\n\"BookingId\":666666,\r\n\"CategoryId\": 42,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"TextAlerts\": true,\r\n\"Status\": 1,\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"Questions\": [\r\n{\r\n\"Id\": 0,\r\n\"CsrId\": 32751,\r\n\"QuestionText\": \"string\",\r\n\"Answer\": \"string\",\r\n\"QuestionDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"AnswerDate\": \"2018-05-25T16:43:55.669Z\"\r\n}\r\n],\r\n\"Logs\": [\r\n{\r\n\"LogId\": 0,\r\n\"CsrId\": 32751,\r\n\"Subject\": \"string\",\r\n\"Text\": \"string\",\r\n\"CreatedDate\": \"2018-05-25T16:43:55.669Z\",\r\n\"CreatedByCustomer\": true,\r\n\"AgentName\": \"string\"\r\n}\r\n],\r\n\"AgentName\": \"string\",\r\n\"TrackingTag\": \"string\"\r\n}\r\n],\r\n\"NotFoundCsrs\": [\r\n1588333\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetServiceRequestResponse(CSRRequest,new List<id>{reqLog.id},'trp');
        }
        catch(Exception ex){
        }
    }        
    static testMethod void AsyncDerwentWebServiceCustomer_Test() {
        try{ List<Person_Account_Record_Types__c> recTypeList = new List<Person_Account_Record_Types__c>();
            Request_Log__c reqLog = new Request_Log__c();
            reqLog.Entity__c = 'Customer';
            reqLog.Entity_Id__c = '1112222';
            reqLog.Status__c = 'New';
            insert reqLog;
            
            Person_Account_Record_Types__c personRec = new Person_Account_Record_Types__c();
            personRec.name='dnata';personRec.Record_Type_Name__c ='dTME_B2C Customer - New';
            recTypeList.add(personRec);
            Person_Account_Record_Types__c personRec1 = new Person_Account_Record_Types__c();
            personRec1.name='ekh';personRec1.Record_Type_Name__c ='EKH B2C Customer - New'; //v2.0
            recTypeList.add(personRec1);
            insert recTypeList;
            
            String CustomerRequest='{\r\n\"Customers\": [\r\n{\r\n\"CustomerId\": \"bfb73454-5a3a-457e-b8e1-a942ae47fbf8\",\r\n\"TenantId\":2,\r\n\"Email\": \"test@test.com\",\r\n\"Title\": \"Mr\",\r\n\"FirstName\": \"test\",\r\n\"LastName\": \"test\",\r\n\"CountryCode\": \"GB\",\r\n\"PostCode\": \"test\",\r\n\"Address\": \"test\",\r\n\"City\": \"test\",\r\n\"County\": \"\",\r\n\"HomeTel\": \"65765765\",\r\n\"MobileTel\": \"\",\r\n\"Notes\": \"\",\r\n\"LoyaltyId\": \"\",\r\n\"Nationality\": \"GB\",\r\n\"SendTextAlerts\": false,\r\n\"EmailSignup\": false\r\n}\r\n],\r\n\"NotFoundCustomers\": [\r\n\"04372647-04b1-0000-a380-ac4c8d3a74d2\"\r\n]\r\n}';
            
            AsyncDerwentWebService.parseGetCustResponse(CustomerRequest,new List<id>{reqLog.id});
            
            AsyncDerwentWebService.resumeItems( AsyncDerwentWebService.prepareInProgressItems(null, null, null, null, null,  null, null, null, null, null));
            try{
                AsyncDerwentWebService.getExistingCustomerEmail(null, null);
            }catch(Exception ex){}
            
            try{
                AsyncDerwentWebService.InPorgressItems inputItems = new AsyncDerwentWebService.InPorgressItems ();
                inputItems.RequestLog = new Request_Log__c(Id=recTypeList[0].Id);
                AsyncDerwentWebService.resumeItems( inputItems );
            }catch(Exception ex){}

            AsyncDerwentWebService.isFromCustomerCreate = true;
            AsyncDerwentWebService.parseGetCustResponse(CustomerRequest, new list<Id> {reqLog.Id});
        }
        catch(Exception ex){
        }
    }
    
}